!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["swell-js"]=e()}(this,(function(){"use strict";var t=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function e(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function r(t,e){if(t.map)return t.map(e);for(var r=[],n=0;n<t.length;n++)r.push(e(t[n],n));return r}var n=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e};function a(t){var e=t.default;if("function"==typeof e){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(r,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),r}var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i="object"==typeof o&&o&&o.Object===Object&&o;module.exports=i;var c=a(Object.freeze({__proto__:null})),s=c,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),f=l.Symbol,d=f,p=Object.prototype,h=p.hasOwnProperty,y=p.toString,g=d?d.toStringTag:void 0;var m=function(t){var e=h.call(t,g),r=t[g];try{t[g]=void 0;var n=!0}catch(t){}var a=y.call(t);return n&&(e?t[g]=r:delete t[g]),a},b=Object.prototype.toString;var w=m,_=function(t){return b.call(t)},j=f?f.toStringTag:void 0;var x=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":j&&j in Object(t)?w(t):_(t)};var S=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},O=x,A=S;var C,k=function(t){if(!A(t))return!1;var e=O(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},E=l["__core-js_shared__"],$=(C=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"";var I=function(t){return!!$&&$ in t},U=Function.prototype.toString;var z=function(t){if(null!=t){try{return U.call(t)}catch(t){}try{return t+""}catch(t){}}return""},P=k,R=I,D=S,q=z,M=/^\[object .+?Constructor\]$/,L=Function.prototype,T=Object.prototype,N=L.toString,F=T.hasOwnProperty,Z=RegExp("^"+N.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var B=function(t,e){return null==t?void 0:t[e]},G=function(t){return!(!D(t)||R(t))&&(P(t)?Z:M).test(q(t))},J=B;var V=function(t,e){var r=J(t,e);return G(r)?r:void 0},Y=V,W=function(){try{var t=Y(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var H=function(t,e,r){"__proto__"==e&&W?W(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var X=function(t,e){return t===e||t!=t&&e!=e},K=H,Q=X,tt=Object.prototype.hasOwnProperty;var et=function(t,e,r){var n=t[e];tt.call(t,e)&&Q(n,r)&&(void 0!==r||e in t)||K(t,e,r)},rt=Array.isArray;var nt=function(t){return null!=t&&"object"==typeof t},at=x,ot=nt;var it=function(t){return"symbol"==typeof t||ot(t)&&"[object Symbol]"==at(t)},ct=rt,st=it,ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/;var ft=function(t,e){if(ct(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!st(t))||(lt.test(t)||!ut.test(t)||null!=e&&t in Object(e))},dt=V(Object,"create"),pt=dt;var ht=function(){this.__data__=pt?pt(null):{},this.size=0};var yt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt=dt,vt=Object.prototype.hasOwnProperty;var mt=function(t){var e=this.__data__;if(gt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return vt.call(e,t)?e[t]:void 0},bt=dt,wt=Object.prototype.hasOwnProperty;var _t=dt;var jt=ht,xt=yt,St=mt,Ot=function(t){var e=this.__data__;return bt?void 0!==e[t]:wt.call(e,t)},At=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_t&&void 0===e?"__lodash_hash_undefined__":e,this};function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ct.prototype.clear=jt,Ct.prototype.delete=xt,Ct.prototype.get=St,Ct.prototype.has=Ot,Ct.prototype.set=At;var kt=Ct;var Et=function(){this.__data__=[],this.size=0},$t=X;var It=function(t,e){for(var r=t.length;r--;)if($t(t[r][0],e))return r;return-1},Ut=It,zt=Array.prototype.splice;var Pt=It;var Rt=It;var Dt=It;var qt=Et,Mt=function(t){var e=this.__data__,r=Ut(e,t);return!(r<0)&&(r==e.length-1?e.pop():zt.call(e,r,1),--this.size,!0)},Lt=function(t){var e=this.__data__,r=Pt(e,t);return r<0?void 0:e[r][1]},Tt=function(t){return Rt(this.__data__,t)>-1},Nt=function(t,e){var r=this.__data__,n=Dt(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function Ft(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Ft.prototype.clear=qt,Ft.prototype.delete=Mt,Ft.prototype.get=Lt,Ft.prototype.has=Tt,Ft.prototype.set=Nt;var Zt=Ft,Bt=V(l,"Map"),Gt=kt,Jt=Zt,Vt=Bt;var Yt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Wt=function(t,e){var r=t.__data__;return Yt(e)?r["string"==typeof e?"string":"hash"]:r.map},Ht=Wt;var Xt=Wt;var Kt=Wt;var Qt=Wt;var te=function(){this.size=0,this.__data__={hash:new Gt,map:new(Vt||Jt),string:new Gt}},ee=function(t){var e=Ht(this,t).delete(t);return this.size-=e?1:0,e},re=function(t){return Xt(this,t).get(t)},ne=function(t){return Kt(this,t).has(t)},ae=function(t,e){var r=Qt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function oe(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}oe.prototype.clear=te,oe.prototype.delete=ee,oe.prototype.get=re,oe.prototype.has=ne,oe.prototype.set=ae;var ie=oe,ce=ie;function se(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(se.Cache||ce),r}se.Cache=ce;var ue=se;var le=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fe=/\\(\\)?/g,de=function(t){var e=ue(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(le,(function(t,r,n,a){e.push(n?a.replace(fe,"$1"):r||t)})),e}));var pe=function(t,e){for(var r=-1,n=null==t?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a},he=pe,ye=rt,ge=it,ve=f?f.prototype:void 0,me=ve?ve.toString:void 0;var be=function t(e){if("string"==typeof e)return e;if(ye(e))return he(e,t)+"";if(ge(e))return me?me.call(e):"";var r=e+"";return"0"==r&&1/e==-Infinity?"-0":r},we=be;var _e=function(t){return null==t?"":we(t)},je=rt,xe=ft,Se=de,Oe=_e;var Ae=function(t,e){return je(t)?t:xe(t,e)?[t]:Se(Oe(t))},Ce=/^(?:0|[1-9]\d*)$/;var ke=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Ce.test(t))&&t>-1&&t%1==0&&t<e},Ee=it;var $e=function(t){if("string"==typeof t||Ee(t))return t;var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e},Ie=et,Ue=Ae,ze=ke,Pe=S,Re=$e;var De=function(t,e,r,n){if(!Pe(t))return t;for(var a=-1,o=(e=Ue(e,t)).length,i=o-1,c=t;null!=c&&++a<o;){var s=Re(e[a]),u=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return t;if(a!=i){var l=c[s];void 0===(u=n?n(l,s,c):void 0)&&(u=Pe(l)?l:ze(e[a+1])?[]:{})}Ie(c,s,u),c=c[s]}return t},qe=De;var Me=function(t,e,r){return null==t?t:qe(t,e,r)},Le=Ae,Te=$e;var Ne=function(t,e){for(var r=0,n=(e=Le(e,t)).length;null!=t&&r<n;)t=t[Te(e[r++])];return r&&r==n?t:void 0},Fe=Ne;var Ze=function(t,e,r){var n=null==t?void 0:Fe(t,e);return void 0===n?r:n};var Be=ie,Ge=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Je=function(t){return this.__data__.has(t)};function Ve(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Be;++e<r;)this.add(t[e])}Ve.prototype.add=Ve.prototype.push=Ge,Ve.prototype.has=Je;var Ye=Ve;var We=function(t,e,r,n){for(var a=t.length,o=r+(n?1:-1);n?o--:++o<a;)if(e(t[o],o,t))return o;return-1};var He=We,Xe=function(t){return t!=t},Ke=function(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1};var Qe=function(t,e,r){return e==e?Ke(t,e,r):He(t,Xe,r)};var tr=function(t,e){return!!(null==t?0:t.length)&&Qe(t,e,0)>-1};var er=function(t,e,r){for(var n=-1,a=null==t?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1};var rr=function(t,e){return t.has(e)},nr=V(l,"Set");var ar=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},or=nr,ir=function(){},cr=or&&1/ar(new or([,-0]))[1]==1/0?function(t){return new or(t)}:ir,sr=Ye,ur=tr,lr=er,fr=rr,dr=cr,pr=ar;var hr=function(t,e,r){var n=-1,a=ur,o=t.length,i=!0,c=[],s=c;if(r)i=!1,a=lr;else if(o>=200){var u=e?null:dr(t);if(u)return pr(u);i=!1,a=fr,s=new sr}else s=e?[]:c;t:for(;++n<o;){var l=t[n],f=e?e(l):l;if(l=r||0!==l?l:0,i&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue t;e&&s.push(f),c.push(l)}else a(s,f,r)||(s!==c&&s.push(f),c.push(l))}return c},yr=hr;var gr=function(t){return t&&t.length?yr(t):[]},vr=Zt;var mr=Zt,br=Bt,wr=ie;var _r=Zt,jr=function(){this.__data__=new vr,this.size=0},xr=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Sr=function(t){return this.__data__.get(t)},Or=function(t){return this.__data__.has(t)},Ar=function(t,e){var r=this.__data__;if(r instanceof mr){var n=r.__data__;if(!br||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new wr(n)}return r.set(t,e),this.size=r.size,this};function Cr(t){var e=this.__data__=new _r(t);this.size=e.size}Cr.prototype.clear=jr,Cr.prototype.delete=xr,Cr.prototype.get=Sr,Cr.prototype.has=Or,Cr.prototype.set=Ar;var kr=Cr;var Er=Ye,$r=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},Ir=rr;var Ur=function(t,e,r,n,a,o){var i=1&r,c=t.length,s=e.length;if(c!=s&&!(i&&s>c))return!1;var u=o.get(t),l=o.get(e);if(u&&l)return u==e&&l==t;var f=-1,d=!0,p=2&r?new Er:void 0;for(o.set(t,e),o.set(e,t);++f<c;){var h=t[f],y=e[f];if(n)var g=i?n(y,h,f,e,t,o):n(h,y,f,t,e,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!$r(e,(function(t,e){if(!Ir(p,e)&&(h===t||a(h,t,r,n,o)))return p.push(e)}))){d=!1;break}}else if(h!==y&&!a(h,y,r,n,o)){d=!1;break}}return o.delete(t),o.delete(e),d},zr=l.Uint8Array;var Pr=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},Rr=zr,Dr=X,qr=Ur,Mr=Pr,Lr=ar,Tr=f?f.prototype:void 0,Nr=Tr?Tr.valueOf:void 0;var Fr=function(t,e,r,n,a,o,i){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Rr(t),new Rr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Dr(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=Mr;case"[object Set]":var s=1&n;if(c||(c=Lr),t.size!=e.size&&!s)return!1;var u=i.get(t);if(u)return u==e;n|=2,i.set(t,e);var l=qr(c(t),c(e),n,a,o,i);return i.delete(t),l;case"[object Symbol]":if(Nr)return Nr.call(t)==Nr.call(e)}return!1};var Zr=function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t},Br=Zr,Gr=rt;var Jr=function(t,e,r){var n=e(t);return Gr(t)?n:Br(n,r(t))};var Vr=function(){return[]},Yr=function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,o=[];++r<n;){var i=t[r];e(i,r,t)&&(o[a++]=i)}return o},Wr=Vr,Hr=Object.prototype.propertyIsEnumerable,Xr=Object.getOwnPropertySymbols,Kr=Xr?function(t){return null==t?[]:(t=Object(t),Yr(Xr(t),(function(e){return Hr.call(t,e)})))}:Wr,Qr=Kr;var tn=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n},en=x,rn=nt;var nn=function(t){return rn(t)&&"[object Arguments]"==en(t)},an=nt,on=Object.prototype,cn=on.hasOwnProperty,sn=on.propertyIsEnumerable,un=nn(function(){return arguments}())?nn:function(t){return an(t)&&cn.call(t,"callee")&&!sn.call(t,"callee")},ln=un,fn={exports:{}};var dn=function(){return!1};!function(t,e){var r=l,n=dn,a=e&&!e.nodeType&&e,o=a&&t&&!t.nodeType&&t,i=o&&o.exports===a?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||n;t.exports=c}(fn,fn.exports);var pn=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},hn=x,yn=pn,gn=nt,vn={};vn["[object Float32Array]"]=vn["[object Float64Array]"]=vn["[object Int8Array]"]=vn["[object Int16Array]"]=vn["[object Int32Array]"]=vn["[object Uint8Array]"]=vn["[object Uint8ClampedArray]"]=vn["[object Uint16Array]"]=vn["[object Uint32Array]"]=!0,vn["[object Arguments]"]=vn["[object Array]"]=vn["[object ArrayBuffer]"]=vn["[object Boolean]"]=vn["[object DataView]"]=vn["[object Date]"]=vn["[object Error]"]=vn["[object Function]"]=vn["[object Map]"]=vn["[object Number]"]=vn["[object Object]"]=vn["[object RegExp]"]=vn["[object Set]"]=vn["[object String]"]=vn["[object WeakMap]"]=!1;var mn=function(t){return gn(t)&&yn(t.length)&&!!vn[hn(t)]};var bn=function(t){return function(e){return t(e)}},wn={exports:{}};!function(t,e){var r=c,n=e&&!e.nodeType&&e,a=n&&t&&!t.nodeType&&t,o=a&&a.exports===n&&r.process,i=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=i}(wn,wn.exports);var _n=mn,jn=bn,xn=wn.exports,Sn=xn&&xn.isTypedArray,On=Sn?jn(Sn):_n,An=tn,Cn=ln,kn=rt,En=fn.exports,$n=ke,In=On,Un=Object.prototype.hasOwnProperty;var zn=function(t,e){var r=kn(t),n=!r&&Cn(t),a=!r&&!n&&En(t),o=!r&&!n&&!a&&In(t),i=r||n||a||o,c=i?An(t.length,String):[],s=c.length;for(var u in t)!e&&!Un.call(t,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$n(u,s))||c.push(u);return c},Pn=Object.prototype;var Rn=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Pn)};var Dn=function(t,e){return function(r){return t(e(r))}},qn=Dn(Object.keys,Object),Mn=Rn,Ln=qn,Tn=Object.prototype.hasOwnProperty;var Nn=function(t){if(!Mn(t))return Ln(t);var e=[];for(var r in Object(t))Tn.call(t,r)&&"constructor"!=r&&e.push(r);return e},Fn=k,Zn=pn;var Bn=function(t){return null!=t&&Zn(t.length)&&!Fn(t)},Gn=zn,Jn=Nn,Vn=Bn;var Yn=function(t){return Vn(t)?Gn(t):Jn(t)},Wn=Jr,Hn=Qr,Xn=Yn;var Kn=function(t){return Wn(t,Xn,Hn)},Qn=Kn,ta=Object.prototype.hasOwnProperty;var ea=function(t,e,r,n,a,o){var i=1&r,c=Qn(t),s=c.length;if(s!=Qn(e).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in e:ta.call(e,l)))return!1}var f=o.get(t),d=o.get(e);if(f&&d)return f==e&&d==t;var p=!0;o.set(t,e),o.set(e,t);for(var h=i;++u<s;){var y=t[l=c[u]],g=e[l];if(n)var v=i?n(g,y,l,e,t,o):n(y,g,l,t,e,o);if(!(void 0===v?y===g||a(y,g,r,n,o):v)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(t),o.delete(e),p},ra=V(l,"DataView"),na=Bt,aa=V(l,"Promise"),oa=nr,ia=V(l,"WeakMap"),ca=x,sa=z,ua="[object Map]",la="[object Promise]",fa="[object Set]",da="[object WeakMap]",pa="[object DataView]",ha=sa(ra),ya=sa(na),ga=sa(aa),va=sa(oa),ma=sa(ia),ba=ca;(ra&&ba(new ra(new ArrayBuffer(1)))!=pa||na&&ba(new na)!=ua||aa&&ba(aa.resolve())!=la||oa&&ba(new oa)!=fa||ia&&ba(new ia)!=da)&&(ba=function(t){var e=ca(t),r="[object Object]"==e?t.constructor:void 0,n=r?sa(r):"";if(n)switch(n){case ha:return pa;case ya:return ua;case ga:return la;case va:return fa;case ma:return da}return e});var wa=ba,_a=kr,ja=Ur,xa=Fr,Sa=ea,Oa=wa,Aa=rt,Ca=fn.exports,ka=On,Ea="[object Arguments]",$a="[object Array]",Ia="[object Object]",Ua=Object.prototype.hasOwnProperty;var za=function(t,e,r,n,a,o){var i=Aa(t),c=Aa(e),s=i?$a:Oa(t),u=c?$a:Oa(e),l=(s=s==Ea?Ia:s)==Ia,f=(u=u==Ea?Ia:u)==Ia,d=s==u;if(d&&Ca(t)){if(!Ca(e))return!1;i=!0,l=!1}if(d&&!l)return o||(o=new _a),i||ka(t)?ja(t,e,r,n,a,o):xa(t,e,s,r,n,a,o);if(!(1&r)){var p=l&&Ua.call(t,"__wrapped__"),h=f&&Ua.call(e,"__wrapped__");if(p||h){var y=p?t.value():t,g=h?e.value():e;return o||(o=new _a),a(y,g,r,n,o)}}return!!d&&(o||(o=new _a),Sa(t,e,r,n,a,o))},Pa=za,Ra=nt;var Da=function t(e,r,n,a,o){return e===r||(null==e||null==r||!Ra(e)&&!Ra(r)?e!=e&&r!=r:Pa(e,r,n,a,t,o))},qa=kr,Ma=Da;var La=function(t,e,r,n){var a=r.length,o=a,i=!n;if(null==t)return!o;for(t=Object(t);a--;){var c=r[a];if(i&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<o;){var s=(c=r[a])[0],u=t[s],l=c[1];if(i&&c[2]){if(void 0===u&&!(s in t))return!1}else{var f=new qa;if(n)var d=n(u,l,s,t,e,f);if(!(void 0===d?Ma(l,u,3,n,f):d))return!1}}return!0},Ta=S;var Na=function(t){return t==t&&!Ta(t)},Fa=Na,Za=Yn;var Ba=function(t){for(var e=Za(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,Fa(a)]}return e};var Ga=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}},Ja=La,Va=Ba,Ya=Ga;var Wa=function(t){var e=Va(t);return 1==e.length&&e[0][2]?Ya(e[0][0],e[0][1]):function(r){return r===t||Ja(r,t,e)}};var Ha=function(t,e){return null!=t&&e in Object(t)},Xa=Ae,Ka=ln,Qa=rt,to=ke,eo=pn,ro=$e;var no=function(t,e,r){for(var n=-1,a=(e=Xa(e,t)).length,o=!1;++n<a;){var i=ro(e[n]);if(!(o=null!=t&&r(t,i)))break;t=t[i]}return o||++n!=a?o:!!(a=null==t?0:t.length)&&eo(a)&&to(i,a)&&(Qa(t)||Ka(t))},ao=Ha,oo=no;var io=function(t,e){return null!=t&&oo(t,e,ao)},co=Da,so=Ze,uo=io,lo=ft,fo=Na,po=Ga,ho=$e;var yo=function(t,e){return lo(t)&&fo(e)?po(ho(t),e):function(r){var n=so(r,t);return void 0===n&&n===e?uo(r,t):co(e,n,3)}};var go=function(t){return function(e){return null==e?void 0:e[t]}},vo=Ne;var mo=function(t){return function(e){return vo(e,t)}},bo=go,wo=mo,_o=ft,jo=$e;var xo=Wa,So=yo,Oo=function(t){return t},Ao=rt,Co=function(t){return _o(t)?bo(jo(t)):wo(t)};var ko=function(t){return"function"==typeof t?t:null==t?Oo:"object"==typeof t?Ao(t)?So(t[0],t[1]):xo(t):Co(t)},Eo=ko,$o=Bn,Io=Yn;var Uo=function(t){return function(e,r,n){var a=Object(e);if(!$o(e)){var o=Eo(r);e=Io(e),r=function(t){return o(a[t],t,a)}}var i=t(e,r,n);return i>-1?a[o?e[i]:i]:void 0}},zo=/\s/;var Po=function(t){for(var e=t.length;e--&&zo.test(t.charAt(e)););return e},Ro=/^\s+/;var Do=function(t){return t?t.slice(0,Po(t)+1).replace(Ro,""):t},qo=S,Mo=it,Lo=/^[-+]0x[0-9a-f]+$/i,To=/^0b[01]+$/i,No=/^0o[0-7]+$/i,Fo=parseInt;var Zo=function(t){if("number"==typeof t)return t;if(Mo(t))return NaN;if(qo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=qo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Do(t);var r=To.test(t);return r||No.test(t)?Fo(t.slice(2),r?2:8):Lo.test(t)?NaN:+t},Bo=Zo,Go=1/0;var Jo=function(t){return t?(t=Bo(t))===Go||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var Vo=function(t){var e=Jo(t),r=e%1;return e==e?r?e-r:e:0},Yo=We,Wo=ko,Ho=Vo,Xo=Math.max;var Ko=Uo((function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var a=null==r?0:Ho(r);return a<0&&(a=Xo(n+a,0)),Yo(t,Wo(e),a)})),Qo=Vo,ti=Zo,ei=_e,ri=l.isFinite,ni=Math.min;var ai=function(t){var e=Math[t];return function(t,r){if(t=ti(t),(r=null==r?0:ni(Qo(r),292))&&ri(t)){var n=(ei(t)+"e").split("e"),a=e(n[0]+"e"+(+n[1]+r));return+((n=(ei(a)+"e").split("e"))[0]+"e"+(+n[1]-r))}return e(t)}},oi=ai("round");var ii=function(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(a);++n<a;)o[n]=t[n+e];return o};var ci=function(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:ii(t,e,r)},si=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ui=function(t){return si.test(t)};var li=function(t){return t.split("")},fi="[\\ud800-\\udfff]",di="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",pi="\\ud83c[\\udffb-\\udfff]",hi="[^\\ud800-\\udfff]",yi="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",vi="(?:"+di+"|"+pi+")"+"?",mi="[\\ufe0e\\ufe0f]?",bi=mi+vi+("(?:\\u200d(?:"+[hi,yi,gi].join("|")+")"+mi+vi+")*"),wi="(?:"+[hi+di+"?",di,yi,gi,fi].join("|")+")",_i=RegExp(pi+"(?="+pi+")|"+wi+bi,"g");var ji=li,xi=ui,Si=function(t){return t.match(_i)||[]};var Oi=ci,Ai=ui,Ci=function(t){return xi(t)?Si(t):ji(t)},ki=_e;var Ei=function(t){return function(e){e=ki(e);var r=Ai(e)?Ci(e):void 0,n=r?r[0]:e.charAt(0),a=r?Oi(r,1).join(""):e.slice(1);return n[t]()+a}},$i=Ei("toUpperCase"),Ii=_e,Ui=$i;var zi=function(t){return Ui(Ii(t).toLowerCase())};var Pi=function(t,e,r,n){var a=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++a]);++a<o;)r=e(r,t[a],a,t);return r};var Ri=function(t){return function(e){return null==t?void 0:t[e]}},Di=Ri({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),qi=_e,Mi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Li=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Ti=function(t){return(t=qi(t))&&t.replace(Mi,Di).replace(Li,"")},Ni=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Fi=function(t){return t.match(Ni)||[]},Zi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Bi=function(t){return Zi.test(t)},Gi="\\u2700-\\u27bf",Ji="a-z\\xdf-\\xf6\\xf8-\\xff",Vi="A-Z\\xc0-\\xd6\\xd8-\\xde",Yi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wi="["+Yi+"]",Hi="\\d+",Xi="[\\u2700-\\u27bf]",Ki="["+Ji+"]",Qi="[^\\ud800-\\udfff"+Yi+Hi+Gi+Ji+Vi+"]",tc="(?:\\ud83c[\\udde6-\\uddff]){2}",ec="[\\ud800-\\udbff][\\udc00-\\udfff]",rc="["+Vi+"]",nc="(?:"+Ki+"|"+Qi+")",ac="(?:"+rc+"|"+Qi+")",oc="(?:['’](?:d|ll|m|re|s|t|ve))?",ic="(?:['’](?:D|LL|M|RE|S|T|VE))?",cc="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sc="[\\ufe0e\\ufe0f]?",uc=sc+cc+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",tc,ec].join("|")+")"+sc+cc+")*"),lc="(?:"+[Xi,tc,ec].join("|")+")"+uc,fc=RegExp([rc+"?"+Ki+"+"+oc+"(?="+[Wi,rc,"$"].join("|")+")",ac+"+"+ic+"(?="+[Wi,rc+nc,"$"].join("|")+")",rc+"?"+nc+"+"+oc,rc+"+"+ic,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hi,lc].join("|"),"g");var dc=Fi,pc=Bi,hc=_e,yc=function(t){return t.match(fc)||[]};var gc=Pi,vc=Ti,mc=function(t,e,r){return t=hc(t),void 0===(e=r?void 0:e)?pc(t)?yc(t):dc(t):t.match(e)||[]},bc=RegExp("['’]","g");var wc=function(t){return function(e){return gc(mc(vc(e).replace(bc,"")),t,"")}},_c=zi,jc=wc((function(t,e,r){return e=e.toLowerCase(),t+(r?_c(e):e)})),xc=wc((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));var Sc=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},Oc=et,Ac=H;var Cc=function(t,e,r,n){var a=!r;r||(r={});for(var o=-1,i=e.length;++o<i;){var c=e[o],s=n?n(r[c],t[c],c,r,t):void 0;void 0===s&&(s=t[c]),a?Ac(r,c,s):Oc(r,c,s)}return r},kc=Cc,Ec=Yn;var $c=function(t,e){return t&&kc(e,Ec(e),t)};var Ic=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},Uc=S,zc=Rn,Pc=Ic,Rc=Object.prototype.hasOwnProperty;var Dc=function(t){if(!Uc(t))return Pc(t);var e=zc(t),r=[];for(var n in t)("constructor"!=n||!e&&Rc.call(t,n))&&r.push(n);return r},qc=zn,Mc=Dc,Lc=Bn;var Tc=function(t){return Lc(t)?qc(t,!0):Mc(t)},Nc=Cc,Fc=Tc;var Zc=function(t,e){return t&&Nc(e,Fc(e),t)},Bc={exports:{}};!function(t,e){var r=l,n=e&&!e.nodeType&&e,a=n&&t&&!t.nodeType&&t,o=a&&a.exports===n?r.Buffer:void 0,i=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=i?i(r):new t.constructor(r);return t.copy(n),n}}(Bc,Bc.exports);var Gc=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},Jc=Cc,Vc=Qr;var Yc=function(t,e){return Jc(t,Vc(t),e)},Wc=Dn(Object.getPrototypeOf,Object),Hc=Zr,Xc=Wc,Kc=Qr,Qc=Vr,ts=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Hc(e,Kc(t)),t=Xc(t);return e}:Qc,es=Cc,rs=ts;var ns=function(t,e){return es(t,rs(t),e)},as=Jr,os=ts,is=Tc;var cs=function(t){return as(t,is,os)},ss=Object.prototype.hasOwnProperty;var us=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ss.call(t,"index")&&(r.index=t.index,r.input=t.input),r},ls=zr;var fs=function(t){var e=new t.constructor(t.byteLength);return new ls(e).set(new ls(t)),e},ds=fs;var ps=function(t,e){var r=e?ds(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},hs=/\w*$/;var ys=function(t){var e=new t.constructor(t.source,hs.exec(t));return e.lastIndex=t.lastIndex,e},gs=f?f.prototype:void 0,vs=gs?gs.valueOf:void 0;var ms=fs;var bs=fs,ws=ps,_s=ys,js=function(t){return vs?Object(vs.call(t)):{}},xs=function(t,e){var r=e?ms(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Ss=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return bs(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return ws(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return xs(t,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return _s(t);case"[object Symbol]":return js(t)}},Os=S,As=Object.create,Cs=function(){function t(){}return function(e){if(!Os(e))return{};if(As)return As(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),ks=Cs,Es=Wc,$s=Rn;var Is=function(t){return"function"!=typeof t.constructor||$s(t)?{}:ks(Es(t))},Us=wa,zs=nt;var Ps=function(t){return zs(t)&&"[object Map]"==Us(t)},Rs=bn,Ds=wn.exports,qs=Ds&&Ds.isMap,Ms=qs?Rs(qs):Ps,Ls=wa,Ts=nt;var Ns=function(t){return Ts(t)&&"[object Set]"==Ls(t)},Fs=bn,Zs=wn.exports,Bs=Zs&&Zs.isSet,Gs=Bs?Fs(Bs):Ns,Js=kr,Vs=Sc,Ys=et,Ws=$c,Hs=Zc,Xs=Bc.exports,Ks=Gc,Qs=Yc,tu=ns,eu=Kn,ru=cs,nu=wa,au=us,ou=Ss,iu=Is,cu=rt,su=fn.exports,uu=Ms,lu=S,fu=Gs,du=Yn,pu=Tc,hu="[object Arguments]",yu="[object Function]",gu="[object Object]",vu={};vu[hu]=vu["[object Array]"]=vu["[object ArrayBuffer]"]=vu["[object DataView]"]=vu["[object Boolean]"]=vu["[object Date]"]=vu["[object Float32Array]"]=vu["[object Float64Array]"]=vu["[object Int8Array]"]=vu["[object Int16Array]"]=vu["[object Int32Array]"]=vu["[object Map]"]=vu["[object Number]"]=vu[gu]=vu["[object RegExp]"]=vu["[object Set]"]=vu["[object String]"]=vu["[object Symbol]"]=vu["[object Uint8Array]"]=vu["[object Uint8ClampedArray]"]=vu["[object Uint16Array]"]=vu["[object Uint32Array]"]=!0,vu["[object Error]"]=vu[yu]=vu["[object WeakMap]"]=!1;var mu=function t(e,r,n,a,o,i){var c,s=1&r,u=2&r,l=4&r;if(n&&(c=o?n(e,a,o,i):n(e)),void 0!==c)return c;if(!lu(e))return e;var f=cu(e);if(f){if(c=au(e),!s)return Ks(e,c)}else{var d=nu(e),p=d==yu||"[object GeneratorFunction]"==d;if(su(e))return Xs(e,s);if(d==gu||d==hu||p&&!o){if(c=u||p?{}:iu(e),!s)return u?tu(e,Hs(c,e)):Qs(e,Ws(c,e))}else{if(!vu[d])return o?e:{};c=ou(e,d,s)}}i||(i=new Js);var h=i.get(e);if(h)return h;i.set(e,c),fu(e)?e.forEach((function(a){c.add(t(a,r,n,a,e,i))})):uu(e)&&e.forEach((function(a,o){c.set(o,t(a,r,n,o,e,i))}));var y=f?void 0:(l?u?ru:eu:u?pu:du)(e);return Vs(y||e,(function(a,o){y&&(a=e[o=a]),Ys(c,o,t(a,r,n,o,e,i))})),c},bu=mu;var wu=function(t){return bu(t,5)},_u=Da;var ju=function(t,e){return _u(t,e)},xu=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===Su}(t)}(t)};var Su="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Ou(t,e){return!1!==e.clone&&e.isMergeableObject(t)?$u((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function Au(t,e,r){return t.concat(e).map((function(t){return Ou(t,r)}))}function Cu(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function ku(t,e){try{return e in t}catch(t){return!1}}function Eu(t,e,r){var n={};return r.isMergeableObject(t)&&Cu(t).forEach((function(e){n[e]=Ou(t[e],r)})),Cu(e).forEach((function(a){(function(t,e){return ku(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,a)||(ku(t,a)&&r.isMergeableObject(e[a])?n[a]=function(t,e){if(!e.customMerge)return $u;var r=e.customMerge(t);return"function"==typeof r?r:$u}(a,r)(t[a],e[a],r):n[a]=Ou(e[a],r))})),n}function $u(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||Au,r.isMergeableObject=r.isMergeableObject||xu,r.cloneUnlessOtherwiseSpecified=Ou;var n=Array.isArray(e);return n===Array.isArray(t)?n?r.arrayMerge(t,e,r):Eu(t,e,r):Ou(e,r)}$u.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return $u(t,r,e)}),{})};var Iu=$u,Uu="[object Symbol]",zu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ru="\\u2700-\\u27bf",Du="a-z\\xdf-\\xf6\\xf8-\\xff",qu="A-Z\\xc0-\\xd6\\xd8-\\xde",Mu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lu="['’]",Tu="[\\ud800-\\udfff]",Nu="["+Mu+"]",Fu="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Zu="\\d+",Bu="[\\u2700-\\u27bf]",Gu="["+Du+"]",Ju="[^\\ud800-\\udfff"+Mu+Zu+Ru+Du+qu+"]",Vu="\\ud83c[\\udffb-\\udfff]",Yu="[^\\ud800-\\udfff]",Wu="(?:\\ud83c[\\udde6-\\uddff]){2}",Hu="[\\ud800-\\udbff][\\udc00-\\udfff]",Xu="["+qu+"]",Ku="(?:"+Gu+"|"+Ju+")",Qu="(?:"+Xu+"|"+Ju+")",tl="(?:['’](?:d|ll|m|re|s|t|ve))?",el="(?:['’](?:D|LL|M|RE|S|T|VE))?",rl="(?:"+Fu+"|"+Vu+")"+"?",nl="[\\ufe0e\\ufe0f]?",al=nl+rl+("(?:\\u200d(?:"+[Yu,Wu,Hu].join("|")+")"+nl+rl+")*"),ol="(?:"+[Bu,Wu,Hu].join("|")+")"+al,il="(?:"+[Yu+Fu+"?",Fu,Wu,Hu,Tu].join("|")+")",cl=RegExp(Lu,"g"),sl=RegExp(Fu,"g"),ul=RegExp(Vu+"(?="+Vu+")|"+il+al,"g"),ll=RegExp([Xu+"?"+Gu+"+"+tl+"(?="+[Nu,Xu,"$"].join("|")+")",Qu+"+"+el+"(?="+[Nu,Xu+Ku,"$"].join("|")+")",Xu+"?"+Ku+"+"+tl,Xu+"+"+el,Zu,ol].join("|"),"g"),fl=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),dl=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pl="object"==typeof o&&o&&o.Object===Object&&o,hl="object"==typeof self&&self&&self.Object===Object&&self,yl=pl||hl||Function("return this")();var gl,vl=(gl={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(t){return null==gl?void 0:gl[t]});function ml(t){return fl.test(t)}function bl(t){return ml(t)?function(t){return t.match(ul)||[]}(t):function(t){return t.split("")}(t)}var wl=Object.prototype.toString,_l=yl.Symbol,jl=_l?_l.prototype:void 0,xl=jl?jl.toString:void 0;function Sl(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&wl.call(t)==Uu}(t))return xl?xl.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function Ol(t,e,r){var n=t.length;return r=void 0===r?n:r,!e&&r>=n?t:function(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(a);++n<a;)o[n]=t[n+e];return o}(t,e,r)}function Al(t){return null==t?"":Sl(t)}var Cl,kl=(Cl=function(t,e,r){return e=e.toLowerCase(),t+(r?$l(Al(e).toLowerCase()):e)},function(t){return function(t,e,r,n){var a=-1,o=t?t.length:0;for(n&&o&&(r=t[++a]);++a<o;)r=e(r,t[a],a,t);return r}(function(t,e,r){return t=Al(t),void 0===(e=r?void 0:e)?function(t){return dl.test(t)}(t)?function(t){return t.match(ll)||[]}(t):function(t){return t.match(zu)||[]}(t):t.match(e)||[]}(function(t){return(t=Al(t))&&t.replace(Pu,vl).replace(sl,"")}(t).replace(cl,"")),Cl,"")});var El,$l=(El="toUpperCase",function(t){var e=ml(t=Al(t))?bl(t):void 0,r=e?e[0]:t.charAt(0),n=e?Ol(e,1).join(""):t.slice(1);return r[El]()+n});module.exports=kl;var Il=a(Object.freeze({__proto__:null})),Ul="[object Symbol]",zl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rl="\\u2700-\\u27bf",Dl="a-z\\xdf-\\xf6\\xf8-\\xff",ql="A-Z\\xc0-\\xd6\\xd8-\\xde",Ml="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ll="['’]",Tl="["+Ml+"]",Nl="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Fl="\\d+",Zl="[\\u2700-\\u27bf]",Bl="["+Dl+"]",Gl="[^\\ud800-\\udfff"+Ml+Fl+Rl+Dl+ql+"]",Jl="(?:\\ud83c[\\udde6-\\uddff]){2}",Vl="[\\ud800-\\udbff][\\udc00-\\udfff]",Yl="["+ql+"]",Wl="(?:"+Bl+"|"+Gl+")",Hl="(?:"+Yl+"|"+Gl+")",Xl="(?:['’](?:d|ll|m|re|s|t|ve))?",Kl="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ql="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",tf="[\\ufe0e\\ufe0f]?",ef=tf+Ql+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Jl,Vl].join("|")+")"+tf+Ql+")*"),rf="(?:"+[Zl,Jl,Vl].join("|")+")"+ef,nf=RegExp(Ll,"g"),af=RegExp(Nl,"g"),of=RegExp([Yl+"?"+Bl+"+"+Xl+"(?="+[Tl,Yl,"$"].join("|")+")",Hl+"+"+Kl+"(?="+[Tl,Yl+Wl,"$"].join("|")+")",Yl+"?"+Wl+"+"+Xl,Yl+"+"+Kl,Fl,rf].join("|"),"g"),cf=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sf="object"==typeof o&&o&&o.Object===Object&&o,uf="object"==typeof self&&self&&self.Object===Object&&self,lf=sf||uf||Function("return this")();var ff=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"});var df=Object.prototype.toString,pf=lf.Symbol,hf=pf?pf.prototype:void 0,yf=hf?hf.toString:void 0;function gf(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&df.call(t)==Ul}(t))return yf?yf.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function vf(t){return null==t?"":gf(t)}var mf=function(t){return function(e){return function(t,e,r,n){var a=-1,o=t?t.length:0;for(n&&o&&(r=t[++a]);++a<o;)r=e(r,t[a],a,t);return r}(function(t,e,r){if(t=vf(t),void 0===(e=r?void 0:e))return function(t){return cf.test(t)}(t)?function(t){return t.match(of)||[]}(t):function(t){return t.match(zl)||[]}(t);return t.match(e)||[]}(function(t){return(t=vf(t))&&t.replace(Pl,ff).replace(af,"")}(e).replace(nf,"")),t,"")}}((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}));module.exports=mf;var bf=Il,wf=a(Object.freeze({__proto__:null}));var _f=function t(e,r){return e&&e.constructor===Object?Object.keys(e).forEach((function(n){var a=e[n];delete e[n],"camel"===r?n=bf(n):"snake"===r?n=wf(n):"upper"===r?n=n.toUpperCase():"lower"===r?n=n.toLowerCase():"function"==typeof r&&(n=r(n)),e[n]=t(a,r)})):e&&e.constructor===Array&&(e=e.map((function(e){return t(e,r)}))),e};let jf={};function xf(t,e,r={}){if(!e||"object"!=typeof e)return t;if(!t||"object"!=typeof t)return t;return Iu(t,e,{arrayMerge:function(t,e,r){const n=t.slice();return e.forEach(((e,a)=>{void 0===n[a]?n[a]=r.cloneUnlessOtherwiseSpecified(e,r):r.isMergeableObject(e)?n[a]=xf(t[a],e,r):-1===t.indexOf(e)&&n.push(e)})),n}})}function Sf(t){return t&&"object"==typeof t&&!(t instanceof Array)}function Of(t){if(!t)return t;const e=JSON.parse(JSON.stringify(t));return _f(e,kf)}function Af(t){if(!t)return t;const e=JSON.parse(JSON.stringify(t));return _f(e,Cf)}function Cf(t){return("$"===t[0]?"$":"")+xc(t).replace(/\_([0-9])/g,"$1")}function kf(t){return("$"===t[0]?"$":"")+jc(t).replace(/\_([0-9])/g,"$1")}function Ef(t){return"string"==typeof t?t.replace(/^[/]+/,""):""}function $f(t){return"string"==typeof t?t.replace(/[/]+$/,""):""}function If(a){return function(a,o,i,c){return o=o||"&",i=i||"=",null===a&&(a=void 0),"object"==typeof a?r(n(a),(function(n){var c=encodeURIComponent(e(n))+i;return t(a[n])?r(a[n],(function(t){return c+encodeURIComponent(e(t))})).join(o):c+encodeURIComponent(e(a[n]))})).join(o):c?encodeURIComponent(e(c))+i+encodeURIComponent(e(a)):""}(a)}function Uf(t,e,r){return t instanceof Array?t.reduce(e,r):r}function zf(){return!("undefined"!=typeof window&&window&&window.document)}function Pf(t){return"function"==typeof t}function Rf(t,e,r){return{list:r.indexOf("list")>=0?function(r){return t("get",e,void 0,r)}:void 0,get:r.indexOf("get")>=0?function(r,n){return t("get",e,r,n)}:void 0}}async function Df(t,e,r,n){const a=jf.vaultUrl,o=jf.timeout,i=`swell_vault_response_${window.__swell_vault_request_id=window.__swell_vault_request_id||0,window.__swell_vault_request_id++,window.__swell_vault_request_id}`;return r={$jsonp:{method:t,callback:i},$data:r,$key:jf.key},new Promise(((t,n)=>{const c=document.createElement("script");c.type="text/javascript",c.src=`${$f(a)}/${Ef(e)}?${function(t){const e=[],r=function(t,r){"function"==typeof r?r=r():null==r&&(r=""),e[e.length]=encodeURIComponent(t)+"="+encodeURIComponent(r)};for(const e in t)Mf(e,t[e],r);return e.join("&").replace(" ","+")}(r)}`;const s=setTimeout((()=>{window[i]({$error:`Request timed out after ${o/1e3} seconds`,$status:500})}),o);window[i]=e=>{if(clearTimeout(s),e&&e.$error){const t=new Error(e.$error);t.code="request_error",t.status=e.$status,n(t)}else if(!e||e.$status>=300){const t=new Error("A connection error occurred while making the request");t.code="connection_error",t.status=e.$status,n(t)}else t(jf.useCamelCase?Of(e.$data):e.$data);delete window[i],c.parentNode.removeChild(c)},document.getElementsByTagName("head")[0].appendChild(c)}))}const qf=/\[\]$/;function Mf(t,e,r){let n;if(e instanceof Array)for(let n=0;n<e.length;n++)qf.test(t)?r(t,v):Mf(t+"["+("object"==typeof v&&null!=v?n:"")+"]",v,r);else if(e&&"object"==typeof e)for(n in e)Mf(t+"["+n+"]",e[n],r);else r(t,e)}const Lf={async createToken(t){let e=null,r=null,n=null;t||(e="Card details are missing in `swell.card.createToken(card)`",n="");const a=Af(t);if(!a.nonce){if(this.validateNumber(a.number)||(e="Card number appears to be invalid",r="invalid_card_number",n="number"),a.exp){const t=this.expiry(a.exp);a.exp_month=t.month,a.exp_year=t.year}this.validateExpiry(a.exp_month,a.exp_year)||(e="Card expiry appears to be invalid",r="invalid_card_expiry",n="exp_month"),this.validateCVC(a.cvc)||(e="Card CVC code appears to be invalid",r="invalid_card_cvc",n="exp_cvc")}if(e){const t=new Error(e);throw t.code=r||"invalid_card",t.status=402,t.param=n,t}const o=await Df("post","/tokens",a);if(o.errors){const t=Object.keys(o.errors)[0],e=new Error(o.errors[t].message||"Unknown error");throw e.code="vault_error",e.status=402,e.param=t,e}return o},expiry(t){if(t&&t.month&&t.year)return t;const e=new String(t).split(/[\s\/\-]+/,2),r=e[0];let n=e[1];if(n&&2===n.length&&/^\d+$/.test(n)){n=(new Date).getFullYear().toString().substring(0,2)+n}return{month:~~r,year:~~n}},types(){let t,e,r,n;for(e={},t=r=40;r<=49;t=++r)e[t]="Visa";for(t=n=50;n<=59;t=++n)e[t]="MasterCard";return e[34]=e[37]="American Express",e[60]=e[62]=e[64]=e[65]="Discover",e[35]="JCB",e[30]=e[36]=e[38]=e[39]="Diners Club",e},type(t){return this.types()[t.slice(0,2)]||"Unknown"},luhnCheck(t){let e,r,n,a,o,i;for(n=!0,a=0,r=(t+"").split("").reverse(),o=0,i=r.length;o<i;o++)e=r[o],e=parseInt(e,10),(n=!n)&&(e*=2),e>9&&(e-=9),a+=e;return a%10==0},validateNumber(t){return(t=(t+"").replace(/\s+|-/g,"")).length>=10&&t.length<=16&&this.luhnCheck(t)},validateExpiry(t,e){let r,n;return t=String(t).trim(),e=String(e).trim(),!!/^\d+$/.test(t)&&(!!/^\d+$/.test(e)&&(parseInt(t,10)<=12&&(n=new Date(e,t),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)))},validateCVC:t=>(t=String(t).trim(),/^\d+$/.test(t)&&t.length>=3&&t.length<=4)};function Tf(t){if(zf())return;const e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0}function Nf(t,e,r={}){if(zf())return;const n=new Date;n.setDate(n.getDate()+7),(r={path:"/",expires:n.toUTCString(),...r}).expires&&r.expires.toUTCString&&(r.expires=r.expires.toUTCString());let a=encodeURIComponent(t)+"="+encodeURIComponent(e);for(const t in r){a+="; "+t;const e=r[t];!0!==e&&(a+="="+e)}document.cookie=a}let Ff={};const Zf={options:{enabled:!0,debug:!1},debug(...t){this.options.debug&&console.log(...t)},values({model:t,id:e},r){if(this.debug("cache.values",...arguments),void 0===r)return Ze(Ff,`${t}.${e}`,{});for(let n in r)Me(Ff,`${t}.${e}.${n}`,r[n])},preset(t){this.debug("cache.preset",...arguments);const{presets:e=[]}=this.values(t);e.push(t),this.values(t,{presets:e})},set(t){this.debug("cache.set",...arguments);let{model:e,id:r,path:n,value:a}=t,{data:o={},record:i,presets:c}=this.values(t);if(null===r)return;if(void 0===i)return this.preset(t);o=xf(i||{},o);const{useCamelCase:s}=jf;if(s&&a&&"object"==typeof a&&(a=Of(a)),n||a instanceof Array){let t={...o||{}},e=s?"string"==typeof(u=n)?u.split(".").map(jc).join("."):u:n;Me(t,e||"",a),o=t}else a&&"object"==typeof a?(o=o||{},o=xf(o,a)):o=a;var u;this.values(t,{data:o});try{const t=Ff[e][r];void 0!==t&&(void 0!==t.data&&(t.data=JSON.parse(JSON.stringify(t.data))),void 0!==t.record&&(t.record=JSON.parse(JSON.stringify(t.record))))}catch(t){}},get(t,e){this.debug("cache.get",...arguments);const{data:r,recordTimer:n}=this.values({model:t,id:e});if(this.debug("cache.get:data+recordTimer",...arguments),n)return r},setRecord(t,e){this.debug("cache.setRecord",...arguments);let{recordTimer:r,presets:n}=this.values(e);if(r&&clearTimeout(r),r=setTimeout((()=>{this.values(e,{record:void 0,recordTimer:void 0})}),5e3),this.values(e,{record:void 0!==t?t:null,recordTimer:r}),n){for(let t of n)this.set(t);this.values(e,{presets:void 0})}const a=this.get(e.model,e.id);return void 0!==a?a:t},async getFetch(t,e,r){if(this.options.enabled){this.debug("cache.getFetch",...arguments);const r=this.get(t,e);if(void 0!==r)return r}const n=await r();return this.setRecord(n,{model:t,id:e})},clear(t,e){this.debug("cache.clear",...arguments),t?Me(Ff,e?`${t}.${e}`:t,void 0):Ff={}}};function Bf(t){const{get:e,list:r}=Rf(t,"/attributes",["list","get"]);return{get:(t,...r)=>Zf.getFetch("attributes",t,(()=>e(t,...r))),list:r}}let Gf;function Jf(t){let e=t||[];if(t&&"object"==typeof t&&!(t instanceof Array)){e=[];for(const r in t)e.push({id:r,value:t[r]})}return e instanceof Array?e.map((t=>({id:t.id||t.name,value:t.value}))):e}function Vf(t,e,r){const n=Gf.useCamelCase?Af(t):t,a=Yf(n,r),o={...n,price:a.price||0,sale_price:a.sale_price,orig_price:a.orig_price,stock_status:n.stock_status};let i=0;const c=[],s=Jf(e),u=function(t,e){return t.options?Uf(e?t.options.filter(e):t.options,((t,e)=>{const r=Uf(e.values,((t,e)=>({...t,[e.id]:{...e,id:e.id},[e.name]:{...e,id:e.id}})),{});return{...t,[e.id]:{...e,values:r},[e.name]:{...e,values:r}}}),{}):{}}(n);for(const t of s)u[t.id]&&u[t.id].values[t.value]&&(u[t.id].variant?c.push(u[t.id].values[t.value].id):i+=u[t.id].values[t.value].price||0);if(c.length>0){const t=function(t,e){if(e.length>0){const r=t.variants&&t.variants.results;if(r.length>0)for(const t of r){const r=Af(t);if(ju(r.option_value_ids.sort(),e.sort()))return t}}return null}(n,c);if(t){let e=a;try{e=Yf(t,r)}catch(t){}o.variant_id=t.id,o.price=e.price||0,o.sale_price=e.sale_price||a.sale_price,o.orig_price=e.orig_price||a.orig_price,o.stock_status=t.stock_status,o.stock_level=t.stock_level||0,o.images=(t.images&&t.images.length?t.images:n.images)||[]}}return i>0&&(o.price+=i,o.sale_price&&(o.sale_price+=i),o.orig_price&&(o.orig_price+=i)),void 0===o.sale_price&&delete o.sale_price,void 0===o.orig_price&&delete o.orig_price,Gf.useCamelCase?Of(o):o}function Yf(t,e){const r=Ze(e,"plan_id",Ze(e,"plan")),n=Ze(e,"type","string"==typeof e?e:void 0!==r?"subscription":"standard");let a=Ze(t,`purchase_options.${n}`);if(!a&&"standard"!==n)throw new Error(`Product purchase option '${n}' not found or not active`);if(a){if(a.plans)if(void 0!==r){if(a=Ko(a.plans,{id:r}),!a)throw new Error(`Subscription purchase plan '${r}' not found or not active`)}else a=a.plans[0];return{...a,price:"number"==typeof a.price?a.price:t.price,sale_price:"number"==typeof a.sale_price?a.sale_price:t.sale_price,orig_price:"number"==typeof a.orig_price?a.orig_price:t.orig_price}}return{type:"standard",price:t.price,sale_price:t.sale_price,orig_price:t.orig_price}}function Wf(t,e={}){let r=(e.attributes||void 0===e.attributes)&&Xf(t);e.filterableAttributes&&(r=r.filter((t=>e.filterableAttributes.find((e=>t.id===e.id)))));const n=(e.categories||void 0===e.categories)&&Hf(t),a=(e.price||void 0===e.price)&&Kf(t);let o=[];return a&&o.push({id:"price",label:"Price",type:"range",options:[{value:a.min,label:a.min},{value:a.max,label:a.max}],interval:a.interval}),n&&n.length>0&&o.push({id:"category",label:"Category",type:"select",options:n.map((t=>({value:t.slug,label:t.name})))}),r&&r.length>0&&(o=[...o,...Uf(r,((t,e)=>[...t,..."category"!==e.id&&"price"!==e.id&&e.values instanceof Array&&e.values.length>0?[{id:e.id,label:e.name,type:"select",options:e.values.map((t=>({value:t,label:t})))}]:[]]),[])]),o}function Hf(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.categories)for(let r of t.categories){if(!r)continue;Ko(e,{id:r.id})||e.push(r)}return e}function Xf(t){const e=[],r=t&&t.results||(t.id?[t]:t);if(r instanceof Array)for(let t of r)if(t.attributes)for(let r in t.attributes){if(!t.attributes[r])continue;const n=t.attributes[r].value;let a=Ko(e,{id:xc(r)});a?a.values=gr([...a.values,...n instanceof Array?n:[n]]):e.push({...t.attributes[r],value:void 0,values:[...n instanceof Array?n:[n]]})}return e}function Kf(t){let e,r,n;const a=t&&t.results||(t.id?[t]:t);if(a instanceof Array)for(let t of a)(void 0===r||t.price>r)&&(r=Math.ceil(t.price)),(void 0===e||t.price<e)&&(e=Math.floor(t.price));if(e===r)return null;for(n=Math.ceil((r-e)/10)||1,n>1e3?n=1e3:n>100?n=100:n>10&&(n=10),r%n>0&&(r=n+r-r%n),e%n>0&&(e-=e%n);(r-e)/n%1>0;)r++;return{min:e,max:r,interval:n}}function Qf(t,e){return{state:null,order:null,settings:null,requested:!1,pendingRequests:[],cacheClear:null,async requestStateChange(e,r,n,a){return this.requestStateSync((async()=>{const o=await t(e,r,n,a);return o&&o.errors||(this.state=o),o}))},async requestStateSync(t){if(this.state)return await t();if(this.requested)return new Promise((e=>{this.pendingRequests.push({handler:t,resolve:e})}));this.requested=!0;const e=await t();for(this.requested=!1;this.pendingRequests.length>0;){const{handler:t,resolve:e}=this.pendingRequests.shift();e(t())}return e},get(){let t;return this.cacheClear&&(this.cacheClear=null,t={$cache:!1}),this.requestStateChange("get","/cart",void 0,t)},clearCache(){this.cacheClear=!0},getItemData(t,e={}){let r=wu(t);return"string"==typeof t&&(r={...e||{},product_id:t}),r&&r.options&&(r.options=Jf(r.options)),r},addItem(t,e){return this.requestStateChange("post","/cart/items",this.getItemData(t,e))},updateItem(t,e){return this.requestStateChange("put",`/cart/items/${t}`,this.getItemData(e))},setItems(t){let e=t;return e&&e.map&&(e=e.map(this.getItemData)),this.requestStateChange("put","/cart/items",e)},removeItem(t){return this.requestStateChange("delete",`/cart/items/${t}`)},recover(t){return this.requestStateChange("put",`/cart/recover/${t}`)},update(t){let e=t;return e.items&&e.items.map&&(e={...e,items:e.items.map(this.getItemData)}),this.requestStateChange("put","/cart",e)},applyCoupon(t){return this.requestStateChange("put","/cart/coupon",{code:t})},removeCoupon(){return this.requestStateChange("delete","/cart/coupon")},applyGiftcard(t){return this.requestStateChange("post","/cart/giftcards",{code:t})},removeGiftcard(t){return this.requestStateChange("delete",`/cart/giftcards/${t}`)},async getShippingRates(){return await this.requestStateChange("get","/cart/shipment-rating"),this.state[e.useCamelCase?"shipmentRating":"shipment_rating"]},async submitOrder(){const e=await t("post","/cart/order");return e.errors||(this.state=null,this.order=e),e},async getOrder(e){let r;return r=e?await t("get","/cart/order",{checkout_id:e}):await t("get","/cart/order"),this.order=r,r},async getSettings(){return this.settings=await t("get","/cart/settings"),this.settings}}}function td(t,e){return{state:null,menuState:null,paymentState:null,subscriptionState:null,sessionState:null,localizedState:{},refresh(){return this.state=null,this.menuState=null,this.paymentState=null,this.subscriptionState=null,this.sessionState=null,this.localizedState={},this.get()},getState(e,r,{id:n,def:a,refresh:o=!1}={}){return this[r]&&!o||(this[r]=t("get",e)),this[r]&&"function"==typeof this[r].then?this[r].then((t=>(this[r]=t,this.getLocalizedState(r,n,a)))):this.getLocalizedState(r,n,a)},getLocalizedState(t,e,r){const n=this.getCurrentLocale(),a=this.localizedState;return a.code!==n&&(a.code=n,delete a[n]),a[n]||(a[n]={}),a[n][t]||(a[n][t]=this.decodeLocale(this[t])),e?Ze(a[n][t],e,r):a[n][t]},findState(t,e,{where:r,def:n}={}){const a=this.getState(t,e);return a&&"function"==typeof a.then?a.then((t=>Ko(t,r)||n)):Ko(a,r)||n},get(t,e){return this.getState("/settings","state",{id:t,def:e})},getCurrentLocale:()=>e.api.locale.selected(),getStoreLocale(){return Ze(this.state,"store.locale")},getStoreLocales(){return Ze(this.state,"store.locales")},set({model:t,path:r,value:n}){const a=this.getCurrentLocale(),o=t?`${t.replace(/s$/,"")}State`:"state",{useCamelCase:i}=e;let c={};r?Me(c,r,n):c=n,i&&(c=Of(c)),this[o]=xf(this[o]||{},c),this.localizedState[a]&&(this.localizedState[a][o]=this.decodeLocale(this[o]))},menus(t,e){return this.findState("/settings/menus","menuState",{where:{id:t},def:e})},payments(t,e){return this.getState("/settings/payments","paymentState",{id:t,def:e})},subscriptions(t,e){return this.getState("/settings/subscriptions","subscriptionState",{id:t,def:e})},session(t,e){return this.getState("/session","sessionState",{id:t,def:e})},decodeLocale(t){const r=this.getCurrentLocale();if(!t||"object"!=typeof t)return t;let n=this.getStoreLocales();return n=n?n.reduce(((t,e)=>({...t,[e.code]:e})),{}):{},ed(wu(t),r,n,e)},async load(){try{const{settings:e,menus:r,payments:n,subscriptions:a,session:o}=await t("get","/settings/all");this.localizedState={},this.set({value:e}),this.set({model:"menus",value:r}),this.set({model:"payments",value:n}),this.set({model:"subscriptions",value:a}),this.set({model:"session",value:o})}catch(t){console.error(`Swell: unable to loading settings (${t})`)}}}}function ed(t,e,r,n){if(Sf(t)){const a=Object.keys(t);for(let o of a)"$locale"===o&&(rd(e,t,o,r,n),delete t.$locale),void 0!==t[o]&&(t[o]=ed(t[o],e,r,n))}else if(t instanceof Array)for(var a=0;a<t.length;a++)t[a]=ed(t[a],e,r,n);return t}function rd(t,e,r,n,a){if(!t||!Sf(e[r]))return;let o,i;const c=Object.keys(e[r]);for(let e of c){const r=e.replace(/\-.+$/,""),c=a.useCamelCase?jc(t):t;e!==t&&e!==c&&r!==c||(o=t,i=n[t])}if(!o&&Sf(n)){const e=Object.keys(n);for(let r of e){const e=r.replace(/\-.+$/,"");r!==t&&e!==t||(o=r,i=n[r])}}let s,u={};if(i){let t=i.fallback;const a=t;for(;t&&(s=s||[],s.push(t),u={...e[r][t]||{},...u},t=n[t]&&n[t].fallback,a!==t););}let l={...u,...e[r][o]||{}};const f=Object.keys(l);for(let t of f){const n=null!==l[t]&&""!==l[t];let a=s&&!n;if(a)for(let n of s){if(a=!e[r][n]||null===e[r][n][t]||""===e[r][n][t],!a){e[t]=e[r][n][t];break}if("none"===n){e[t]=null;break}}else n&&(e[t]=l[t])}}var nd=_e;var ad=function(t){return nd(t).toLowerCase()};var od=function(t){return function(e,r,n){for(var a=-1,o=Object(e),i=n(e),c=i.length;c--;){var s=i[t?c:++a];if(!1===r(o[s],s,o))break}return e}},id=od(),cd=Yn;var sd=function(t,e){return t&&id(t,e,cd)},ud=Bn;var ld=function(t,e){return function(r,n){if(null==r)return r;if(!ud(r))return t(r,n);for(var a=r.length,o=e?a:-1,i=Object(r);(e?o--:++o<a)&&!1!==n(i[o],o,i););return r}}(sd);var fd=Pi,dd=ld,pd=ko,hd=function(t,e,r,n,a){return a(t,(function(t,a,o){r=n?(n=!1,t):e(r,t,a,o)})),r},yd=rt;var gd=function(t,e,r){var n=yd(t)?fd:hd,a=arguments.length<3;return n(t,pd(e),r,a,dd)},vd=Nn,md=wa,bd=ln,wd=rt,_d=Bn,jd=fn.exports,xd=Rn,Sd=On,Od=Object.prototype.hasOwnProperty;var Ad=function(t){if(null==t)return!0;if(_d(t)&&(wd(t)||"string"==typeof t||"function"==typeof t.splice||jd(t)||Sd(t)||bd(t)))return!t.length;var e=md(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(xd(t))return!vd(t).length;for(var r in t)if(Od.call(t,r))return!1;return!0},Cd=ld,kd=Bn;var Ed=pe,$d=ko,Id=function(t,e){var r=-1,n=kd(t)?Array(t.length):[];return Cd(t,(function(t,a,o){n[++r]=e(t,a,o)})),n},Ud=rt;var zd=function(t,e){return(Ud(t)?Ed:Id)(t,$d(e))};const Pd={city:"city",country:"country",line1:"address1",line2:"address2",postal_code:"zip",state:"state"},Rd={name:"name",phone:"phone"};function Dd(t){const{account:e={},billing:r,shipping:n}=t,a={...Ze(e,"shipping",{}),...Ze(e,"billing",{}),...n,...r},o=t=>gd(t,((t,e,r)=>{const n=a[e];return n&&(t[r]=n),t}),{}),i=o(Rd);if(!Ad(i)){const t=o(Pd);return{...i,...Ad(t)?{}:{address:t}}}}function qd(t){const e=ad(Ze(t,"currency","eur")),r=zd(t.items,(t=>({type:"sku",description:t.product.name,quantity:t.quantity,currency:e,amount:Math.round(100*Zo(t.price_total-t.discount_total))}))),n=Ze(t,"tax_included_total");n&&r.push({type:"tax",description:"Taxes",currency:e,amount:Math.round(100*Zo(n))});const a=Ze(t,"shipping",{}),o=Ze(t,"shipment_total",{});return a.price&&r.push({type:"shipping",description:a.service_name,currency:e,amount:Math.round(100*Zo(o))}),r}async function Md(t,e){const r={type:"klarna",flow:"redirect",amount:Math.round(100*Ze(e,"grand_total",0)),currency:ad(Ze(e,"currency","eur")),klarna:{product:"payment",purchase_country:Ze(e,"settings.country","DE")},source_order:{items:qd(e)},redirect:{return_url:window.location.href}};return function(t,e){const r=(t,e)=>gd(t,((t,r,n)=>{const a=e[r];return a&&(t[n]=a),t}),{});t.klarna={...t.klarna,...r({shipping_first_name:"first_name",shipping_last_name:"last_name"},e.shipping)};const n=r({phone:"phone"},e.shipping),a=r(Pd,e.shipping);(n||a)&&(t.source_order.shipping={...n||{},...a?{address:a}:{}}),t.klarna={...t.klarna,...r({first_name:"first_name",last_name:"last_name"},e.billing||Ze(e,"account.billing")||e.shipping)};const o=r({email:"email"},e.account),i=r(Pd,e.billing||Ze(e,"account.billing")||e.shipping);(o||i)&&(t.owner={...o||{},...i?{address:i}:{}})}(r,e),await t.createSource(r)}async function Ld(t,e){const r={type:"bancontact",amount:Math.round(100*Ze(e,"grand_total",0)),currency:ad(Ze(e,"currency","eur")),redirect:{return_url:window.location.href}};return function(t,e){const{account:r={},billing:n,shipping:a}=e,o={...r.shipping,...r.billing,...a,...n},i=((t,e)=>gd(t,((t,r,n)=>{const a=e[r];return a&&(t[n]=a),t}),{}))(Pd,o);t.owner={email:r.email,name:o.name||r.name,...o.phone?{phone:o.phone}:r.phone?{phone:r.phone}:{},...Ad(i)?{}:{address:i}}}(r,e),await t.createSource(r)}function Td(t,e){return["BIF","DJF","JPY","KRW","PYG","VND","XAF","XPF","CLP","GNF","KMF","MGA","RWF","VUV","XOF"].includes(t.toUpperCase())?e:Math.round(100*e)}const Nd={given_name:"first_name",family_name:"last_name",city:"city",country:"country",phone:"phone",postal_code:"zip",street_address:"address1",street_address2:"address2",region:"state"},Fd=(t,e)=>{return{...(r=Nd,n=t[e],gd(r,((t,e,r)=>{const a=n[e];return a&&(t[r]=a),t}),{})),email:Ze(t,"account.email")};var r,n};function Zd(t){const e=zd(t.items,(t=>({type:"physical",name:Ze(t,"product.name"),reference:Ze(t,"product.sku")||Ze(t,"product.slug"),quantity:t.quantity,unit_price:Math.round(100*Zo(t.price-t.discount_each)),total_amount:Math.round(100*Zo(t.price_total-t.discount_total)),tax_rate:0,total_tax_amount:0}))),r=Ze(t,"tax_included_total"),n=100*Zo(r);r&&e.push({type:"sales_tax",name:"Taxes",quantity:1,unit_price:n,total_amount:n,tax_rate:0,total_tax_amount:0});const a=Ze(t,"shipping",{}),o=Ze(t,"shipment_total",{}),i=100*Zo(o);return a.price&&e.push({type:"shipping_fee",name:a.service_name,quantity:1,unit_price:i,total_amount:i,tax_rate:0,total_tax_amount:0}),e}const Bd={},Gd={},Jd={};let Vd=null;function Yd(t,e){return Vd=e||Vd,{params:null,methodSettings:null,get:e=>t("get","/payments",e),async methods(){if(this.methodSettings)return this.methodSettings;const e=await t("get","/payment/methods");return this.methodSettings=e},async createElements(e){this.params=e||{};const r=Af(await Qf.methods(t,Vd).get());if(!r)throw new Error("Cart not found");const n=Af(await td.methods(t,Vd).payments());if(n.error)throw new Error(n.error);await async function(t,e,r,n){n.card&&(r.card?"braintree"===r.card.gateway?window.braintree||await Wd("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"):"stripe"===r.card.gateway&&(window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),await Hd(t,r,n)):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.ideal&&(r.card?r.ideal?"stripe"===r.card.gateway&&(window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),await Hd(t,r,n)):console.error("Payment element error: iDEAL payments are disabled. See Payment settings in the Swell dashboard for details."):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.paypal&&(r.paypal?r.card&&"braintree"===r.card.gateway&&"braintree"===r.paypal.gateway?(window.paypal||await Wd("paypal-sdk",`https://www.paypal.com/sdk/js?currency=${e.currency}&client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&vault=true`),window.braintree||await Wd("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"),window.braintree&&!window.braintree.paypalCheckout&&await Wd("braintree-web-paypal-checkout","https://js.braintreegateway.com/web/3.57.0/js/paypal-checkout.min.js"),await async function(t,e,r,n){const a=await Df("post","/authorization",{gateway:"braintree"});if(a.error)throw new Error(a.error);const o=window.braintree,i=window.paypal;o.client.create({authorization:a}).then((t=>o.paypalCheckout.create({client:t}))).then((r=>i.Buttons({style:n.paypal.style||{},createBillingAgreement:()=>r.createPayment({flow:"vault",currency:e.currency,amount:e.grand_total}),onApprove:(e,a)=>r.tokenizePayment(e).then((({nonce:e})=>Qf.methods(t,Vd).update({billing:{paypal:{nonce:e}}}))).then((()=>Pf(n.paypal.onSuccess)&&n.paypal.onSuccess(e,a))).catch(Pf(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t)),onCancel:Pf(n.paypal.onCancel)?()=>n.paypal.onCancel():()=>console.log("PayPal payment cancelled"),onError:Pf(n.paypal.onError)?t=>n.paypal.onError(t):t=>console.error("PayPal error",t)}).render(n.paypal.elementId||"#paypal-button"))).catch(Pf(n.paypal.onError)?n.paypal.onError:t=>console.error("PayPal error",t))}(t,e,0,n)):(window.paypal||await Wd("paypal-sdk",`https://www.paypal.com/sdk/js?currency=${e.currency}&client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&intent=authorize&commit=false`),await async function(t,e,r,n){const a=window.paypal,{paypal:{locale:o,style:i,elementId:c}={}}=n,s=t=>{const e=Ze(n,"paypal.onError");if(Pf(e))return e(t);throw new Error(t.message)},u=()=>{const t=Ze(n,"paypal.onSuccess");return Pf(t)&&t()},{totalDue:l}=Xd(e);if(!(l>0))throw new Error("Invalid PayPal button amount. Value should be greater than zero.");a.Buttons({locale:o||"en_US",style:i||{layout:"horizontal",height:45,color:"gold",shape:"rect",label:"paypal",tagline:!1},createOrder:(t,r)=>r.order.create({intent:"AUTHORIZE",purchase_units:[{amount:{value:+l.toFixed(2),currency_code:e.currency}}]}),onApprove:(r,n)=>n.order.get().then((r=>{const n=r.id,a=r.payer,o=Ze(r,"purchase_units[0].shipping");return Qf.methods(t).update({...!e.account_logged_in&&{account:{email:a.email_address}},billing:{method:"paypal",paypal:{order_id:n}},shipping:{name:o.name.full_name,address1:o.address.address_line_1,address2:o.address.address_line_2,state:o.address.admin_area_1,city:o.address.admin_area_2,zip:o.address.postal_code,country:o.address.country_code}})})).then(u).catch(s)},s).render(c||"#paypal-button")}(t,e,0,n)):console.error("Payment element error: PayPal payments are disabled. See Payment settings in the Swell dashboard for details."))}(t,r,n,this.params)},async tokenize(e){const r=Af(await Qf.methods(t,Vd).get());if(!r)throw new Error("Cart not found");const n=Af(await td.methods(t,Vd).payments());if(n.error)throw new Error(n.error);return await async function(t,e,r,n){const{totalDue:a}=Xd(n),o=t=>{const r=Ze(e,"card.onError")||Ze(e,"ideal.onError")||Ze(e,"klarna.onError")||Ze(e,"bancontact.onError")||Ze(e,"paysafecard.onError");if(Pf(r))return r(t);throw new Error(t.message)},i=t=>{const r=Ze(e,"card.onSuccess")||Ze(e,"ideal.onSuccess");if(Pf(r))return r(t)};if(!e)return o({message:"Tokenization parameters not passed"});if(e.card&&r.card){if("stripe"===r.card.gateway&&Gd.stripe&&Jd.stripe){const e=Jd.stripe,r=await async function(t,e,r){const n=Dd(r),{error:a,paymentMethod:o}=await t.createPaymentMethod({type:"card",card:e,...n?{billing_details:n}:{}});return a?{error:a}:{token:o.id,last4:o.card.last4,exp_month:o.card.exp_month,exp_year:o.card.exp_year,brand:o.card.brand,address_check:o.card.checks.address_line1_check,cvc_check:o.card.checks.cvc_check,zip_check:o.card.checks.address_zip_check}}(e,Gd.stripe,n);if(r.error)return o(r.error);if(a<1)return Qf.methods(t,Vd).update({billing:{method:"card",card:r}}).then(i).catch(o);const c=ad(Ze(n,"currency","usd")),s=Td(c,n.trial?n.trial_initial_capture_total+n.trial_auth_total:a),u=Ze(n,"account.stripe_customer"),l=Af(await Yd(t).createIntent({gateway:"stripe",intent:{payment_method:r.token,amount:s,currency:c,capture_method:"manual",setup_future_usage:"off_session",...u?{customer:u}:{}}}).catch(o));if(l&&"requires_confirmation"===l.status){const{paymentIntent:a,error:c}=await e.confirmCardPayment(l.client_secret);return c?o(c):await Qf.methods(t,Vd).update({billing:{method:"card",card:r,intent:{stripe:{id:a.id,...n.trial&&{auth_amount:n.trial_auth_total}}}}}).then(i).catch(o)}}else if("quickpay"===r.card.gateway){const e=await async function(t,e){return await e({gateway:"quickpay",intent:{currency:Ze(t,"currency","USD"),order_id:Math.random().toString(36).substr(2,9)}})}(n,Yd(t).createIntent).catch(o);if(!e)return;if(e.error)return o(e.error);await Qf.methods(t,Vd).update({billing:{method:"card",intent:{quickpay:{id:e}}}}),async function(t){const e=window.location.origin+window.location.pathname,r=await t({gateway:"quickpay",params:{action:"create",continueurl:`${e}?gateway=quickpay&redirect_status=succeeded`,cancelurl:`${e}?gateway=quickpay&redirect_status=canceled`}});r&&r.url&&window.location.replace(r.url)}(Yd(t).authorizeGateway).catch(o)}}else if(e.ideal&&r.ideal){if(r.card&&"stripe"===r.card.gateway&&Gd.stripe&&Jd.stripe){const{error:e,paymentMethod:r}=await async function(t,e,r={}){const n=Dd(r);return await t.createPaymentMethod({type:"ideal",ideal:e,...n?{billing_details:n}:{}})}(Jd.stripe,Gd.stripe,n.billing);if(e)return o(e);const i=ad(Ze(n,"currency","eur")),c=Td(i,a),s=Af(await Yd(t).createIntent({gateway:"stripe",intent:{payment_method:r.id,amount:c,currency:i,payment_method_types:"ideal",confirmation_method:"manual",confirm:!0,return_url:window.location.href}}).catch(o));if(s)return await Qf.methods(t,Vd).update({billing:{method:"ideal",ideal:{token:r.id},intent:{stripe:{id:s.id}}}}).catch(o),("requires_action"===s.status||"requires_source_action"===s.status)&&await Jd.stripe.handleCardAction(s.client_secret)}}else if(e.klarna&&r.klarna){if("klarna"===r.klarna.gateway){const e=await async function(t,e){const r=`${window.location.origin}${window.location.pathname}?gateway=klarna_direct&sid={{session_id}}`,n=`${r}&authorization_token={{authorization_token}}`;return e({gateway:"klarna",intent:{locale:t.display_locale||Ze(t,"settings.locale")||"en-US",purchase_country:Ze(t,"billing.country")||Ze(t,"shipping.country"),purchase_currency:t.currency,billing_address:Fd(t,"billing"),shipping_address:Fd(t,"shipping"),order_amount:Math.round(100*Ze(t,"grand_total",0)),order_lines:JSON.stringify(Zd(t)),merchant_urls:{success:n,back:r,cancel:r,error:r,failure:r}}})}(n,Yd(t).createIntent).catch(o);return e&&window.location.replace(e.redirect_url)}if(r.card&&"stripe"===r.card.gateway){window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,a=window.Stripe(e),i=Af(await td.methods(t,Vd).get()),{error:c,source:s}=await Md(a,{...n,settings:i.store});return c?o(c):Qf.methods(t,Vd).update({billing:{method:"klarna"}}).then((()=>window.location.replace(s.redirect.url))).catch(o)}}else if(e.bancontact&&r.bancontact){if(r.card&&"stripe"===r.card.gateway){window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/");const{publishable_key:e}=r.card,a=window.Stripe(e),{error:i,source:c}=await Ld(a,n);return i?o(i):Qf.methods(t,Vd).update({billing:{method:"bancontact"}}).then((()=>window.location.replace(c.redirect.url))).catch(o)}}else if(e.paysafecard&&r.paysafecard){const e=await async function(t,e){const r=`${window.location.origin+window.location.pathname}?gateway=paysafecard`;return await e({gateway:"paysafecard",intent:{type:"PAYSAFECARD",amount:t.grand_total,redirect:{success_url:r,failure_url:r},notification_url:r,customer:{id:Ze(t,"account.id")},currency:Ze(t,"currency","USD")}})}(n,Yd(t).createIntent).catch(o);if(!e)return;return await Qf.methods(t,Vd).update({billing:{method:"paysafecard",intent:{paysafecard:{id:e.id}}}}),window.location.replace(e.redirect.auth_url)}}(t,e||this.params,n,r)},async handleRedirect(e){const r=Af(await Qf.methods(t,Vd).get());if(!r)throw new Error("Cart not found");return await async function(t,e,r){const n=t=>{const r=Ze(e,"card.onError")||Ze(e,"paysafecard.onError")||Ze(e,"klarna.onError");if(Pf(r))return r(t);throw new Error(t.message)},a=t=>{const r=Ze(e,"card.onSuccess")||Ze(e,"paysafecard.onSuccess")||Ze(e,"klarna.onSuccess");if(Pf(r))return r(t)},o=function(t){const e=t.search.substr(1),r={};return e.split("&").forEach((function(t){const e=t.split("=");r[e[0]]=decodeURIComponent(e[1])})),r}(window.location);!function(){const t=window.location.origin+window.location.pathname;window.history.pushState({path:t},"",t)}();const{gateway:i}=o;let c;"quickpay"===i?c=await async function(t,e,r,n){const{redirect_status:a,card_id:o}=n;switch(a){case"succeeded":const e=await async function(t,e){return await e({gateway:"quickpay",params:{action:"get",id:t}})}(o,Yd(t).authorizeGateway);return e?e.error?e:(await Qf.methods(t,Vd).update({billing:{method:"card",card:e}}),{success:!0}):void 0;case"canceled":return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};default:return{error:{message:`Unknown redirect status: ${a}.`}}}}(t,0,0,o):"paysafecard"===i?c=await async function(t,e){const r=Ze(e,"billing.intent.paysafecard.id");if(!r)return{error:{message:"Paysafecard payment ID not defined."}};const n=await Yd(t).updateIntent({gateway:"paysafecard",intent:{payment_id:r}});if(!n)return;switch(n.status){case"AUTHORIZED":return{success:!0};case"CANCELED_CUSTOMER":return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};default:return{error:{message:`Unknown redirect status: ${n.status}.`}}}}(t,r):"klarna_direct"===i&&(c=await async function(t,e,r,n){const{authorization_token:a}=n;if(!a)return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};return await Qf.methods(t,Vd).update({billing:{method:"klarna",klarna:{token:a}}}),{success:!0}}(t,0,0,o));return c?c.error?n(c.error):a(c):void 0}(t,e||this.params,r)},async authenticate(e){const r=await this.get(e);if(!r)throw new Error("Payment not found");const n=Af(await td.methods(t,Vd).payments());if(n.error)throw new Error(n.error);return await async function(t,e,r){const{method:n,gateway:a}=e;if("card"===n){const n=r.card;if(n){if("stripe"===a&&"stripe"===n.gateway)return window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),async function(t,e,r){const{transaction_id:n,card:{token:a}={}}=e,{publishable_key:o}=r.card,i=await Yd(t,Vd).updateIntent({gateway:"stripe",intent:{id:n,payment_method:a}}).catch((t=>({error:t})));if(i.error)return i;const c=window.Stripe(o),s=await c.confirmCardPayment(i.client_secret);return s.error?{error:{message:s.error.message,code:s.error.code}}:{status:s.status}}(t,e,r)}else console.error("Authenticate error: credit card payments are disabled. See Payment settings in the Swell dashboard for details.")}}(t,r,n)},async createIntent(t){const e=await Df("post","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e},async updateIntent(t){const e=await Df("put","/intent",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e},async authorizeGateway(t){const e=await Df("post","/authorization",t);if(e.errors){const t=Object.keys(e.errors)[0],r=new Error(e.errors[t].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=t,r}return e}}}const Wd=async(t,e)=>(Bd[t]=Bd[t]||new Promise((r=>{const n=document.createElement("script");n.id=t,n.src=e,n.async=!0,n.type="text/javascript",n.addEventListener("load",(()=>{r(),Bd[t]=null}),{once:!0}),document.head.appendChild(n)})),Bd[t]);async function Hd(t,e,r){const{publishable_key:n}=e.card,a=window.Stripe(n),o=a.elements(r.config),i=t=>{const e=Ze(r,`card[${t}]`)||r.card||r.ideal,n=e.options||{},a=o.create(t,n);a.mount(e.elementId||`#${t}-element`),e.onChange&&a.on("change",e.onChange),e.onReady&&a.on("ready",e.onReady),e.onFocus&&a.on("focus",e.onFocus),e.onBlur&&a.on("blur",e.onBlur),e.onEscape&&a.on("escape",e.onEscape),e.onClick&&a.on("click",e.onClick),"card"!==t&&"cardNumber"!==t&&"idealBank"!==t||(Gd.stripe=a)};Jd.stripe=a,r.ideal?i("idealBank"):r.card.separateElements?(i("cardNumber"),i("cardExpiry"),i("cardCvc")):i("card")}function Xd(t){const{grand_total:e,account:r,account_credit_amount:n,giftcards:a}=t;let o=e,i=0,c=0,s=0;if(a&&a.length>0){for(let t of a)o-=t.amount;o<0&&(c=-o)}const u="number"==typeof n?n:r&&r.balance;return u>0&&(o-=u,o<0&&(s=-o-c)),o<0&&(i=-o,o=0),{totalDue:o,totalRemaining:i,totalRemainingGiftcard:c,totalRemainingAccount:s}}const Kd={};require("isomorphic-fetch");const Qd={store:null,key:null,url:null,useCamelCase:null,previewContent:null},tp={options:Qd,request:ep,init(t,e,r={}){Qd.key=e,Qd.store=t,Qd.url=r.url?$f(r.url):`https://${t}.swell.store`,Qd.vaultUrl=r.vaultUrl?$f(r.vaultUrl):"https://vault.schema.io",Qd.timeout=r.timeout&&parseInt(r.timeout,10)||2e4,Qd.useCamelCase=r.useCamelCase||!1,Qd.previewContent=r.previewContent||!1,Qd.session=r.session,Qd.locale=r.locale,Qd.currency=r.currency,Qd.api=tp,jf=Qd},auth(...t){return this.init(...t)},get:(t,e)=>ep("get",t,e),put:(t,e)=>ep("put",t,e),post:(t,e)=>ep("post",t,e),delete:(t,e)=>ep("delete",t,e),cache:Zf,card:Lf,cart:Qf(ep,Qd),account:function(t){return{state:null,async requestStateChange(e,r,n,a){const o=await t(e,r,n,a);return o&&o.errors?o:this.state=o},get(t){return this.requestStateChange("get","/account",t)},create(t){return this.requestStateChange("post","/account",t)},update(t){return this.requestStateChange("put","/account",t)},login(t,e){return e&&e.password_token?this.requestStateChange("post","/account/login",{email:t,password_token:e.password_token}):this.requestStateChange("post","/account/login",{email:t,password:e})},logout(){return this.state=null,t("post","/account/logout")},recover:e=>t("post","/account/recover",e),listAddresses:e=>t("get","/account/addresses",e),createAddress:e=>t("post","/account/addresses",e),updateAddress:(e,r)=>t("put",`/account/addresses/${e}`,r),deleteAddress:e=>t("delete",`/account/addresses/${e}`),listCards:e=>t("get","/account/cards",e),createCard:e=>t("post","/account/cards",e),updateCard:(e,r)=>t("put",`/account/cards/${e}`,r),deleteCard:e=>t("delete",`/account/cards/${e}`),listOrders:e=>t("get","/account/orders",e),getOrder:e=>t("get",`/account/orders/${e}`),getAddresses:e=>t("get","/account/addresses",e),getCards:e=>t("get","/account/cards",e),getOrders:e=>t("get","/account/orders",e)}}(ep),products:function(t,e){Gf=e;const{get:r,list:n}=Rf(t,"/products",["list","get"]);return{get:(t,...e)=>Zf.getFetch("products",t,(()=>r(t,...e))),list:n,variation:Vf,categories:Hf,attributes:Xf,priceRange:Kf,filters:Wf,filterableAttributeFilters:(e,r)=>async function(t,e,r){const{results:n}=await Bf.methods(t,Gf).list({filterable:!0});return Wf(e,{...r,filterableAttributes:n})}(t,e,r)}}(ep,Qd),categories:function(t){const{get:e,list:r}=Rf(t,"/categories",["list","get"]);return{get:(t,...r)=>Zf.getFetch("categories",t,(()=>e(t,...r))),list:r}}(ep),attributes:Bf(ep),subscriptions:function(t){const{get:e,list:r}=Rf(t,"/subscriptions",["list","get"]);return{get:(t,...r)=>Zf.getFetch("subscriptions",t,(()=>e(t,...r))),list:r,getCleanData:t=>(t&&t.options&&(t.options=Jf(t.options)),t.items&&t.items.map&&(t.items=t.items.map((t=>(t.options&&(t.options=Jf(t.options)),t)))),t),create(e){return t("post","/subscriptions",this.getCleanData(e))},update(e,r){return t("put",`/subscriptions/${e}`,this.getCleanData(r))},addItem(e,r){return t("post",`/subscriptions/${e}/items`,this.getCleanData(r))},setItems(e,r){return r&&r.map&&(r=r.map(this.getCleanData)),t("put",`/subscriptions/${e}/items`,r)},updateItem(e,r,n){return t("put",`/subscriptions/${e}/items/${r}`,this.getCleanData(n))},removeItem:(e,r)=>t("delete",`/subscriptions/${e}/items/${r}`)}}(ep),content:function(t,e){return{get:(r,n,a)=>Zf.getFetch(`content_${r}`,n,(()=>t("get",`/content/${r}`,n,{$preview:e.previewContent,...a||{}}))),list:(e,r)=>t("get",`/content/${e}`,void 0,r)}}(ep,Qd),settings:td(ep,Qd),payment:Yd(ep,Qd),locale:function(t,e){return{code:null,state:null,list:()=>e.api.settings.get("store.locales",[]),async select(r){return this.set(r),Nf("swell-locale",r),e.api.settings.locale=r,await t("put","/session",{locale:r})},selected(){if(this.code)return this.code;const t=e.api.settings.getStoreLocale(),r=Tf("swell-locale");return e.api.settings.locale=r||t,r||t},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t){return this.code=t,this.state=Ko(this.list(),{code:t})||{},this.state}}}(ep,Qd),currency:function(t,e){return{code:null,state:null,locale:null,list:()=>e.api.settings.get("store.currencies",[]),async select(e){return this.set(e),t("put","/session",{currency:e})},selected(){return this.code||this.set(Tf("swell-currency")||e.api.settings.get("store.currency")),this.code},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(t="USD"){return this.code=t,this.state=Ko(this.list(),{code:t})||{code:t},this.locale=String(e.api.settings.get("store.locale","object"==typeof navigator?navigator.language:"en-US")),Nf("swell-currency",t),this.state},format(t,e={}){let r=this.get();if(e.code&&e.code!==r.code){const t=this.list();r=Ko(t,{code:e.code})||{code:e.code}}const{code:n="USD",type:a,decimals:o,rate:i}=r,c=e.code||n,s=e.rate||i,u=e.locale||this.locale,l="number"==typeof e.decimals?e.decimals:o,{convert:f=!0}=e;let d=t;f&&("display"===a||e.rate)&&"number"==typeof d&&"number"==typeof s&&(d=this.applyRounding(t*s,r));const p=this.formatter({code:c,locale:u,decimals:l});try{if("number"==typeof d)return p.format(d);{const t=Ze(p.formatToParts(0),"0.value","$");return t!==c?t:""}}catch(t){console.warn(t)}return String(t)},formatter({code:t,locale:e,decimals:r}){const n=[t,e=String(e||"").replace("_","-"),r].join("|");if(Kd[n])return Kd[n];const a=[];e&&a.push(e),a.push("en-US");const o="number"==typeof r?r:void 0,i={style:"currency",currency:t,currencyDisplay:"symbol",minimumFractionDigits:o,maximumFractionDigits:o};try{try{Kd[n]=new Intl.NumberFormat(a,i)}catch(t){t.message.indexOf("Invalid language tag")>=0&&(Kd[n]=new Intl.NumberFormat("en-US",i))}}catch(t){console.warn(t)}return Kd[n]},applyRounding(t,e){if(!e||!e.round)return t;const r=e.decimals,n="fraction"===e.round_interval&&e.round_fraction||0;let a=~~t,o=this.round(t,r);if(o===n)return a+o;const i=this.round(o-n,1);if("down"===("nearest"===e.round?i>0?i>=.5?"up":"down":i<=-.5?"down":"up":e.round))a=a+n-(o>n?0:1);else a=a+n+(o>n?1:0);return this.round(a,r)},round:oi}}(ep,Qd)};async function ep(t,e,r,n,a){const o={...Qd,...a},i=o.session||Tf("swell-session"),c=o.locale||Tf("swell-locale"),s=o.currency||Tf("swell-currency"),u=`${o.url}${o.base||""}/api`,l=String(t).toLowerCase();let f=e,d=r;var p;let h;if(void 0===n&&"string"!=typeof r||(f=[$f(e),Ef(r)].join("/"),d=n),f=o.fullUrl||`${u}/${p=f,Ef($f(p))}`,d=o.useCamelCase?Af(d):d,"get"===l){let t;[f,t]=f.split("?");const e=[t,If(d)].join("&").replace(/^&/,"");f=`${f}${e?`?${e}`:""}`}else h=JSON.stringify(d);const y={Accept:"application/json","Content-Type":"application/json",Authorization:`Basic ${g=String(o.key),"undefined"!=typeof btoa?btoa(g):Buffer.from(g).toString("base64")}`};var g;i&&(y["X-Session"]=i),c&&(y["X-Locale"]=c),s&&(y["X-Currency"]=s);const v=await fetch(f,{method:l,headers:y,body:h,credentials:"include",mode:"cors"}),m=v.headers.get("X-Session");"string"==typeof m&&i!==m&&Nf("swell-session",m);const b=await v.json();if(b&&b.error){const t=new Error(b.error.message);throw t.status=v.status,t.code=b.error.code,t.param=b.error.param,t}if(!v.ok){const t=new Error("A connection error occurred while making the request");throw t.code="connection_error",t}return Qd.useCamelCase?Of(b):b}return"undefined"!=typeof window&&(window.swell={version:"@VERSION@"}),tp}));
//# sourceMappingURL=swell.umd.min.js.map
