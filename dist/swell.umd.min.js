!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["swell-js"]=t()}(this,(function(){"use strict";var e=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function t(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function r(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t};function a(e){var t=e.default;if("function"==typeof t){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})})),r}var o="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i="object"==typeof o&&o&&o.Object===Object&&o;module.exports=i;var c=a(Object.freeze({__proto__:null})),s=c,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")(),f=l.Symbol,d=f,p=Object.prototype,h=p.hasOwnProperty,y=p.toString,g=d?d.toStringTag:void 0;var b=function(e){var t=h.call(e,g),r=e[g];try{e[g]=void 0;var n=!0}catch(e){}var a=y.call(e);return n&&(t?e[g]=r:delete e[g]),a},m=Object.prototype.toString;var w=b,_=function(e){return m.call(e)},j=f?f.toStringTag:void 0;var x=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":j&&j in Object(e)?w(e):_(e)};var S=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},O=x,C=S;var A,k=function(e){if(!C(e))return!1;var t=O(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},E=l["__core-js_shared__"],$=(A=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"";var I=function(e){return!!$&&$ in e},U=Function.prototype.toString;var z=function(e){if(null!=e){try{return U.call(e)}catch(e){}try{return e+""}catch(e){}}return""},P=k,R=I,D=S,q=z,M=/^\[object .+?Constructor\]$/,L=Function.prototype,T=Object.prototype,N=L.toString,F=T.hasOwnProperty,Z=RegExp("^"+N.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var B=function(e,t){return null==e?void 0:e[t]},G=function(e){return!(!D(e)||R(e))&&(P(e)?Z:M).test(q(e))},J=B;var V=function(e,t){var r=J(e,t);return G(r)?r:void 0},Y=V,W=function(){try{var e=Y(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var H=function(e,t,r){"__proto__"==t&&W?W(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var X=function(e,t){return e===t||e!=e&&t!=t},K=H,Q=X,ee=Object.prototype.hasOwnProperty;var te=function(e,t,r){var n=e[t];ee.call(e,t)&&Q(n,r)&&(void 0!==r||t in e)||K(e,t,r)},re=Array.isArray;var ne=function(e){return null!=e&&"object"==typeof e},ae=x,oe=ne;var ie=function(e){return"symbol"==typeof e||oe(e)&&"[object Symbol]"==ae(e)},ce=re,se=ie,ue=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,le=/^\w*$/;var fe=function(e,t){if(ce(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!se(e))||(le.test(e)||!ue.test(e)||null!=t&&e in Object(t))},de=V(Object,"create"),pe=de;var he=function(){this.__data__=pe?pe(null):{},this.size=0};var ye=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ge=de,ve=Object.prototype.hasOwnProperty;var be=function(e){var t=this.__data__;if(ge){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ve.call(t,e)?t[e]:void 0},me=de,we=Object.prototype.hasOwnProperty;var _e=de;var je=he,xe=ye,Se=be,Oe=function(e){var t=this.__data__;return me?void 0!==t[e]:we.call(t,e)},Ce=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=_e&&void 0===t?"__lodash_hash_undefined__":t,this};function Ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ae.prototype.clear=je,Ae.prototype.delete=xe,Ae.prototype.get=Se,Ae.prototype.has=Oe,Ae.prototype.set=Ce;var ke=Ae;var Ee=function(){this.__data__=[],this.size=0},$e=X;var Ie=function(e,t){for(var r=e.length;r--;)if($e(e[r][0],t))return r;return-1},Ue=Ie,ze=Array.prototype.splice;var Pe=Ie;var Re=Ie;var De=Ie;var qe=Ee,Me=function(e){var t=this.__data__,r=Ue(t,e);return!(r<0)&&(r==t.length-1?t.pop():ze.call(t,r,1),--this.size,!0)},Le=function(e){var t=this.__data__,r=Pe(t,e);return r<0?void 0:t[r][1]},Te=function(e){return Re(this.__data__,e)>-1},Ne=function(e,t){var r=this.__data__,n=De(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};function Fe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fe.prototype.clear=qe,Fe.prototype.delete=Me,Fe.prototype.get=Le,Fe.prototype.has=Te,Fe.prototype.set=Ne;var Ze=Fe,Be=V(l,"Map"),Ge=ke,Je=Ze,Ve=Be;var Ye=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var We=function(e,t){var r=e.__data__;return Ye(t)?r["string"==typeof t?"string":"hash"]:r.map},He=We;var Xe=We;var Ke=We;var Qe=We;var et=function(){this.size=0,this.__data__={hash:new Ge,map:new(Ve||Je),string:new Ge}},tt=function(e){var t=He(this,e).delete(e);return this.size-=t?1:0,t},rt=function(e){return Xe(this,e).get(e)},nt=function(e){return Ke(this,e).has(e)},at=function(e,t){var r=Qe(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function ot(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ot.prototype.clear=et,ot.prototype.delete=tt,ot.prototype.get=rt,ot.prototype.has=nt,ot.prototype.set=at;var it=ot,ct=it;function st(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=e.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(st.Cache||ct),r}st.Cache=ct;var ut=st;var lt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ft=/\\(\\)?/g,dt=function(e){var t=ut(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(lt,(function(e,r,n,a){t.push(n?a.replace(ft,"$1"):r||e)})),t}));var pt=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a},ht=pt,yt=re,gt=ie,vt=f?f.prototype:void 0,bt=vt?vt.toString:void 0;var mt=function e(t){if("string"==typeof t)return t;if(yt(t))return ht(t,e)+"";if(gt(t))return bt?bt.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r},wt=mt;var _t=function(e){return null==e?"":wt(e)},jt=re,xt=fe,St=dt,Ot=_t;var Ct=function(e,t){return jt(e)?e:xt(e,t)?[e]:St(Ot(e))},At=/^(?:0|[1-9]\d*)$/;var kt=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&At.test(e))&&e>-1&&e%1==0&&e<t},Et=ie;var $t=function(e){if("string"==typeof e||Et(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t},It=te,Ut=Ct,zt=kt,Pt=S,Rt=$t;var Dt=function(e,t,r,n){if(!Pt(e))return e;for(var a=-1,o=(t=Ut(t,e)).length,i=o-1,c=e;null!=c&&++a<o;){var s=Rt(t[a]),u=r;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(a!=i){var l=c[s];void 0===(u=n?n(l,s,c):void 0)&&(u=Pt(l)?l:zt(t[a+1])?[]:{})}It(c,s,u),c=c[s]}return e},qt=Dt;var Mt=function(e,t,r){return null==e?e:qt(e,t,r)},Lt=Ct,Tt=$t;var Nt=function(e,t){for(var r=0,n=(t=Lt(t,e)).length;null!=e&&r<n;)e=e[Tt(t[r++])];return r&&r==n?e:void 0},Ft=Nt;var Zt=function(e,t,r){var n=null==e?void 0:Ft(e,t);return void 0===n?r:n};var Bt=it,Gt=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Jt=function(e){return this.__data__.has(e)};function Vt(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Bt;++t<r;)this.add(e[t])}Vt.prototype.add=Vt.prototype.push=Gt,Vt.prototype.has=Jt;var Yt=Vt;var Wt=function(e,t,r,n){for(var a=e.length,o=r+(n?1:-1);n?o--:++o<a;)if(t(e[o],o,e))return o;return-1};var Ht=Wt,Xt=function(e){return e!=e},Kt=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1};var Qt=function(e,t,r){return t==t?Kt(e,t,r):Ht(e,Xt,r)};var er=function(e,t){return!!(null==e?0:e.length)&&Qt(e,t,0)>-1};var tr=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1};var rr=function(e,t){return e.has(t)},nr=V(l,"Set");var ar=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},or=nr,ir=function(){},cr=or&&1/ar(new or([,-0]))[1]==1/0?function(e){return new or(e)}:ir,sr=Yt,ur=er,lr=tr,fr=rr,dr=cr,pr=ar;var hr=function(e,t,r){var n=-1,a=ur,o=e.length,i=!0,c=[],s=c;if(r)i=!1,a=lr;else if(o>=200){var u=t?null:dr(e);if(u)return pr(u);i=!1,a=fr,s=new sr}else s=t?[]:c;e:for(;++n<o;){var l=e[n],f=t?t(l):l;if(l=r||0!==l?l:0,i&&f==f){for(var d=s.length;d--;)if(s[d]===f)continue e;t&&s.push(f),c.push(l)}else a(s,f,r)||(s!==c&&s.push(f),c.push(l))}return c},yr=hr;var gr=function(e){return e&&e.length?yr(e):[]},vr=Ze;var br=Ze,mr=Be,wr=it;var _r=Ze,jr=function(){this.__data__=new vr,this.size=0},xr=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Sr=function(e){return this.__data__.get(e)},Or=function(e){return this.__data__.has(e)},Cr=function(e,t){var r=this.__data__;if(r instanceof br){var n=r.__data__;if(!mr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new wr(n)}return r.set(e,t),this.size=r.size,this};function Ar(e){var t=this.__data__=new _r(e);this.size=t.size}Ar.prototype.clear=jr,Ar.prototype.delete=xr,Ar.prototype.get=Sr,Ar.prototype.has=Or,Ar.prototype.set=Cr;var kr=Ar;var Er=Yt,$r=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Ir=rr;var Ur=function(e,t,r,n,a,o){var i=1&r,c=e.length,s=t.length;if(c!=s&&!(i&&s>c))return!1;var u=o.get(e),l=o.get(t);if(u&&l)return u==t&&l==e;var f=-1,d=!0,p=2&r?new Er:void 0;for(o.set(e,t),o.set(t,e);++f<c;){var h=e[f],y=t[f];if(n)var g=i?n(y,h,f,t,e,o):n(h,y,f,e,t,o);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!$r(t,(function(e,t){if(!Ir(p,t)&&(h===e||a(h,e,r,n,o)))return p.push(t)}))){d=!1;break}}else if(h!==y&&!a(h,y,r,n,o)){d=!1;break}}return o.delete(e),o.delete(t),d},zr=l.Uint8Array;var Pr=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r},Rr=zr,Dr=X,qr=Ur,Mr=Pr,Lr=ar,Tr=f?f.prototype:void 0,Nr=Tr?Tr.valueOf:void 0;var Fr=function(e,t,r,n,a,o,i){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new Rr(e),new Rr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Dr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=Mr;case"[object Set]":var s=1&n;if(c||(c=Lr),e.size!=t.size&&!s)return!1;var u=i.get(e);if(u)return u==t;n|=2,i.set(e,t);var l=qr(c(e),c(t),n,a,o,i);return i.delete(e),l;case"[object Symbol]":if(Nr)return Nr.call(e)==Nr.call(t)}return!1};var Zr=function(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e},Br=Zr,Gr=re;var Jr=function(e,t,r){var n=t(e);return Gr(e)?n:Br(n,r(e))};var Vr=function(){return[]},Yr=function(e,t){for(var r=-1,n=null==e?0:e.length,a=0,o=[];++r<n;){var i=e[r];t(i,r,e)&&(o[a++]=i)}return o},Wr=Vr,Hr=Object.prototype.propertyIsEnumerable,Xr=Object.getOwnPropertySymbols,Kr=Xr?function(e){return null==e?[]:(e=Object(e),Yr(Xr(e),(function(t){return Hr.call(e,t)})))}:Wr,Qr=Kr;var en=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},tn=x,rn=ne;var nn=function(e){return rn(e)&&"[object Arguments]"==tn(e)},an=ne,on=Object.prototype,cn=on.hasOwnProperty,sn=on.propertyIsEnumerable,un=nn(function(){return arguments}())?nn:function(e){return an(e)&&cn.call(e,"callee")&&!sn.call(e,"callee")},ln=un,fn={exports:{}};var dn=function(){return!1};!function(e,t){var r=l,n=dn,a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?r.Buffer:void 0,c=(i?i.isBuffer:void 0)||n;e.exports=c}(fn,fn.exports);var pn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},hn=x,yn=pn,gn=ne,vn={};vn["[object Float32Array]"]=vn["[object Float64Array]"]=vn["[object Int8Array]"]=vn["[object Int16Array]"]=vn["[object Int32Array]"]=vn["[object Uint8Array]"]=vn["[object Uint8ClampedArray]"]=vn["[object Uint16Array]"]=vn["[object Uint32Array]"]=!0,vn["[object Arguments]"]=vn["[object Array]"]=vn["[object ArrayBuffer]"]=vn["[object Boolean]"]=vn["[object DataView]"]=vn["[object Date]"]=vn["[object Error]"]=vn["[object Function]"]=vn["[object Map]"]=vn["[object Number]"]=vn["[object Object]"]=vn["[object RegExp]"]=vn["[object Set]"]=vn["[object String]"]=vn["[object WeakMap]"]=!1;var bn=function(e){return gn(e)&&yn(e.length)&&!!vn[hn(e)]};var mn=function(e){return function(t){return e(t)}},wn={exports:{}};!function(e,t){var r=c,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,o=a&&a.exports===n&&r.process,i=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i}(wn,wn.exports);var _n=bn,jn=mn,xn=wn.exports,Sn=xn&&xn.isTypedArray,On=Sn?jn(Sn):_n,Cn=en,An=ln,kn=re,En=fn.exports,$n=kt,In=On,Un=Object.prototype.hasOwnProperty;var zn=function(e,t){var r=kn(e),n=!r&&An(e),a=!r&&!n&&En(e),o=!r&&!n&&!a&&In(e),i=r||n||a||o,c=i?Cn(e.length,String):[],s=c.length;for(var u in e)!t&&!Un.call(e,u)||i&&("length"==u||a&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$n(u,s))||c.push(u);return c},Pn=Object.prototype;var Rn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Pn)};var Dn=function(e,t){return function(r){return e(t(r))}},qn=Dn(Object.keys,Object),Mn=Rn,Ln=qn,Tn=Object.prototype.hasOwnProperty;var Nn=function(e){if(!Mn(e))return Ln(e);var t=[];for(var r in Object(e))Tn.call(e,r)&&"constructor"!=r&&t.push(r);return t},Fn=k,Zn=pn;var Bn=function(e){return null!=e&&Zn(e.length)&&!Fn(e)},Gn=zn,Jn=Nn,Vn=Bn;var Yn=function(e){return Vn(e)?Gn(e):Jn(e)},Wn=Jr,Hn=Qr,Xn=Yn;var Kn=function(e){return Wn(e,Xn,Hn)},Qn=Kn,ea=Object.prototype.hasOwnProperty;var ta=function(e,t,r,n,a,o){var i=1&r,c=Qn(e),s=c.length;if(s!=Qn(t).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in t:ea.call(t,l)))return!1}var f=o.get(e),d=o.get(t);if(f&&d)return f==t&&d==e;var p=!0;o.set(e,t),o.set(t,e);for(var h=i;++u<s;){var y=e[l=c[u]],g=t[l];if(n)var v=i?n(g,y,l,t,e,o):n(y,g,l,e,t,o);if(!(void 0===v?y===g||a(y,g,r,n,o):v)){p=!1;break}h||(h="constructor"==l)}if(p&&!h){var b=e.constructor,m=t.constructor;b==m||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m||(p=!1)}return o.delete(e),o.delete(t),p},ra=V(l,"DataView"),na=Be,aa=V(l,"Promise"),oa=nr,ia=V(l,"WeakMap"),ca=x,sa=z,ua="[object Map]",la="[object Promise]",fa="[object Set]",da="[object WeakMap]",pa="[object DataView]",ha=sa(ra),ya=sa(na),ga=sa(aa),va=sa(oa),ba=sa(ia),ma=ca;(ra&&ma(new ra(new ArrayBuffer(1)))!=pa||na&&ma(new na)!=ua||aa&&ma(aa.resolve())!=la||oa&&ma(new oa)!=fa||ia&&ma(new ia)!=da)&&(ma=function(e){var t=ca(e),r="[object Object]"==t?e.constructor:void 0,n=r?sa(r):"";if(n)switch(n){case ha:return pa;case ya:return ua;case ga:return la;case va:return fa;case ba:return da}return t});var wa=ma,_a=kr,ja=Ur,xa=Fr,Sa=ta,Oa=wa,Ca=re,Aa=fn.exports,ka=On,Ea="[object Arguments]",$a="[object Array]",Ia="[object Object]",Ua=Object.prototype.hasOwnProperty;var za=function(e,t,r,n,a,o){var i=Ca(e),c=Ca(t),s=i?$a:Oa(e),u=c?$a:Oa(t),l=(s=s==Ea?Ia:s)==Ia,f=(u=u==Ea?Ia:u)==Ia,d=s==u;if(d&&Aa(e)){if(!Aa(t))return!1;i=!0,l=!1}if(d&&!l)return o||(o=new _a),i||ka(e)?ja(e,t,r,n,a,o):xa(e,t,s,r,n,a,o);if(!(1&r)){var p=l&&Ua.call(e,"__wrapped__"),h=f&&Ua.call(t,"__wrapped__");if(p||h){var y=p?e.value():e,g=h?t.value():t;return o||(o=new _a),a(y,g,r,n,o)}}return!!d&&(o||(o=new _a),Sa(e,t,r,n,a,o))},Pa=za,Ra=ne;var Da=function e(t,r,n,a,o){return t===r||(null==t||null==r||!Ra(t)&&!Ra(r)?t!=t&&r!=r:Pa(t,r,n,a,e,o))},qa=kr,Ma=Da;var La=function(e,t,r,n){var a=r.length,o=a,i=!n;if(null==e)return!o;for(e=Object(e);a--;){var c=r[a];if(i&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<o;){var s=(c=r[a])[0],u=e[s],l=c[1];if(i&&c[2]){if(void 0===u&&!(s in e))return!1}else{var f=new qa;if(n)var d=n(u,l,s,e,t,f);if(!(void 0===d?Ma(l,u,3,n,f):d))return!1}}return!0},Ta=S;var Na=function(e){return e==e&&!Ta(e)},Fa=Na,Za=Yn;var Ba=function(e){for(var t=Za(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Fa(a)]}return t};var Ga=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}},Ja=La,Va=Ba,Ya=Ga;var Wa=function(e){var t=Va(e);return 1==t.length&&t[0][2]?Ya(t[0][0],t[0][1]):function(r){return r===e||Ja(r,e,t)}};var Ha=function(e,t){return null!=e&&t in Object(e)},Xa=Ct,Ka=ln,Qa=re,eo=kt,to=pn,ro=$t;var no=function(e,t,r){for(var n=-1,a=(t=Xa(t,e)).length,o=!1;++n<a;){var i=ro(t[n]);if(!(o=null!=e&&r(e,i)))break;e=e[i]}return o||++n!=a?o:!!(a=null==e?0:e.length)&&to(a)&&eo(i,a)&&(Qa(e)||Ka(e))},ao=Ha,oo=no;var io=function(e,t){return null!=e&&oo(e,t,ao)},co=Da,so=Zt,uo=io,lo=fe,fo=Na,po=Ga,ho=$t;var yo=function(e,t){return lo(e)&&fo(t)?po(ho(e),t):function(r){var n=so(r,e);return void 0===n&&n===t?uo(r,e):co(t,n,3)}};var go=function(e){return function(t){return null==t?void 0:t[e]}},vo=Nt;var bo=function(e){return function(t){return vo(t,e)}},mo=go,wo=bo,_o=fe,jo=$t;var xo=Wa,So=yo,Oo=function(e){return e},Co=re,Ao=function(e){return _o(e)?mo(jo(e)):wo(e)};var ko=function(e){return"function"==typeof e?e:null==e?Oo:"object"==typeof e?Co(e)?So(e[0],e[1]):xo(e):Ao(e)},Eo=ko,$o=Bn,Io=Yn;var Uo=function(e){return function(t,r,n){var a=Object(t);if(!$o(t)){var o=Eo(r);t=Io(t),r=function(e){return o(a[e],e,a)}}var i=e(t,r,n);return i>-1?a[o?t[i]:i]:void 0}},zo=/\s/;var Po=function(e){for(var t=e.length;t--&&zo.test(e.charAt(t)););return t},Ro=/^\s+/;var Do=function(e){return e?e.slice(0,Po(e)+1).replace(Ro,""):e},qo=S,Mo=ie,Lo=/^[-+]0x[0-9a-f]+$/i,To=/^0b[01]+$/i,No=/^0o[0-7]+$/i,Fo=parseInt;var Zo=function(e){if("number"==typeof e)return e;if(Mo(e))return NaN;if(qo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Do(e);var r=To.test(e);return r||No.test(e)?Fo(e.slice(2),r?2:8):Lo.test(e)?NaN:+e},Bo=Zo,Go=1/0;var Jo=function(e){return e?(e=Bo(e))===Go||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};var Vo=function(e){var t=Jo(e),r=t%1;return t==t?r?t-r:t:0},Yo=Wt,Wo=ko,Ho=Vo,Xo=Math.max;var Ko=Uo((function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:Ho(r);return a<0&&(a=Xo(n+a,0)),Yo(e,Wo(t),a)})),Qo=Vo,ei=Zo,ti=_t,ri=l.isFinite,ni=Math.min;var ai=function(e){var t=Math[e];return function(e,r){if(e=ei(e),(r=null==r?0:ni(Qo(r),292))&&ri(e)){var n=(ti(e)+"e").split("e"),a=t(n[0]+"e"+(+n[1]+r));return+((n=(ti(a)+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}},oi=ai("round");var ii=function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o};var ci=function(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:ii(e,t,r)},si=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ui=function(e){return si.test(e)};var li=function(e){return e.split("")},fi="[\\ud800-\\udfff]",di="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",pi="\\ud83c[\\udffb-\\udfff]",hi="[^\\ud800-\\udfff]",yi="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",vi="(?:"+di+"|"+pi+")"+"?",bi="[\\ufe0e\\ufe0f]?",mi=bi+vi+("(?:\\u200d(?:"+[hi,yi,gi].join("|")+")"+bi+vi+")*"),wi="(?:"+[hi+di+"?",di,yi,gi,fi].join("|")+")",_i=RegExp(pi+"(?="+pi+")|"+wi+mi,"g");var ji=li,xi=ui,Si=function(e){return e.match(_i)||[]};var Oi=ci,Ci=ui,Ai=function(e){return xi(e)?Si(e):ji(e)},ki=_t;var Ei=function(e){return function(t){t=ki(t);var r=Ci(t)?Ai(t):void 0,n=r?r[0]:t.charAt(0),a=r?Oi(r,1).join(""):t.slice(1);return n[e]()+a}},$i=Ei("toUpperCase"),Ii=_t,Ui=$i;var zi=function(e){return Ui(Ii(e).toLowerCase())};var Pi=function(e,t,r,n){var a=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r};var Ri=function(e){return function(t){return null==e?void 0:e[t]}},Di=Ri({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),qi=_t,Mi=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Li=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Ti=function(e){return(e=qi(e))&&e.replace(Mi,Di).replace(Li,"")},Ni=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Fi=function(e){return e.match(Ni)||[]},Zi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Bi=function(e){return Zi.test(e)},Gi="\\u2700-\\u27bf",Ji="a-z\\xdf-\\xf6\\xf8-\\xff",Vi="A-Z\\xc0-\\xd6\\xd8-\\xde",Yi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wi="["+Yi+"]",Hi="\\d+",Xi="[\\u2700-\\u27bf]",Ki="["+Ji+"]",Qi="[^\\ud800-\\udfff"+Yi+Hi+Gi+Ji+Vi+"]",ec="(?:\\ud83c[\\udde6-\\uddff]){2}",tc="[\\ud800-\\udbff][\\udc00-\\udfff]",rc="["+Vi+"]",nc="(?:"+Ki+"|"+Qi+")",ac="(?:"+rc+"|"+Qi+")",oc="(?:['’](?:d|ll|m|re|s|t|ve))?",ic="(?:['’](?:D|LL|M|RE|S|T|VE))?",cc="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",sc="[\\ufe0e\\ufe0f]?",uc=sc+cc+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",ec,tc].join("|")+")"+sc+cc+")*"),lc="(?:"+[Xi,ec,tc].join("|")+")"+uc,fc=RegExp([rc+"?"+Ki+"+"+oc+"(?="+[Wi,rc,"$"].join("|")+")",ac+"+"+ic+"(?="+[Wi,rc+nc,"$"].join("|")+")",rc+"?"+nc+"+"+oc,rc+"+"+ic,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Hi,lc].join("|"),"g");var dc=Fi,pc=Bi,hc=_t,yc=function(e){return e.match(fc)||[]};var gc=Pi,vc=Ti,bc=function(e,t,r){return e=hc(e),void 0===(t=r?void 0:t)?pc(e)?yc(e):dc(e):e.match(t)||[]},mc=RegExp("['’]","g");var wc=function(e){return function(t){return gc(bc(vc(t).replace(mc,"")),e,"")}},_c=zi,jc=wc((function(e,t,r){return t=t.toLowerCase(),e+(r?_c(t):t)})),xc=wc((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Sc=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e},Oc=te,Cc=H;var Ac=function(e,t,r,n){var a=!r;r||(r={});for(var o=-1,i=t.length;++o<i;){var c=t[o],s=n?n(r[c],e[c],c,r,e):void 0;void 0===s&&(s=e[c]),a?Cc(r,c,s):Oc(r,c,s)}return r},kc=Ac,Ec=Yn;var $c=function(e,t){return e&&kc(t,Ec(t),e)};var Ic=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t},Uc=S,zc=Rn,Pc=Ic,Rc=Object.prototype.hasOwnProperty;var Dc=function(e){if(!Uc(e))return Pc(e);var t=zc(e),r=[];for(var n in e)("constructor"!=n||!t&&Rc.call(e,n))&&r.push(n);return r},qc=zn,Mc=Dc,Lc=Bn;var Tc=function(e){return Lc(e)?qc(e,!0):Mc(e)},Nc=Ac,Fc=Tc;var Zc=function(e,t){return e&&Nc(t,Fc(t),e)},Bc={exports:{}};!function(e,t){var r=l,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,o=a&&a.exports===n?r.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}}(Bc,Bc.exports);var Gc=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t},Jc=Ac,Vc=Qr;var Yc=function(e,t){return Jc(e,Vc(e),t)},Wc=Dn(Object.getPrototypeOf,Object),Hc=Zr,Xc=Wc,Kc=Qr,Qc=Vr,es=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Hc(t,Kc(e)),e=Xc(e);return t}:Qc,ts=Ac,rs=es;var ns=function(e,t){return ts(e,rs(e),t)},as=Jr,os=es,is=Tc;var cs=function(e){return as(e,is,os)},ss=Object.prototype.hasOwnProperty;var us=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&ss.call(e,"index")&&(r.index=e.index,r.input=e.input),r},ls=zr;var fs=function(e){var t=new e.constructor(e.byteLength);return new ls(t).set(new ls(e)),t},ds=fs;var ps=function(e,t){var r=t?ds(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)},hs=/\w*$/;var ys=function(e){var t=new e.constructor(e.source,hs.exec(e));return t.lastIndex=e.lastIndex,t},gs=f?f.prototype:void 0,vs=gs?gs.valueOf:void 0;var bs=fs;var ms=fs,ws=ps,_s=ys,js=function(e){return vs?Object(vs.call(e)):{}},xs=function(e,t){var r=t?bs(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)};var Ss=function(e,t,r){var n=e.constructor;switch(t){case"[object ArrayBuffer]":return ms(e);case"[object Boolean]":case"[object Date]":return new n(+e);case"[object DataView]":return ws(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return xs(e,r);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(e);case"[object RegExp]":return _s(e);case"[object Symbol]":return js(e)}},Os=S,Cs=Object.create,As=function(){function e(){}return function(t){if(!Os(t))return{};if(Cs)return Cs(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),ks=As,Es=Wc,$s=Rn;var Is=function(e){return"function"!=typeof e.constructor||$s(e)?{}:ks(Es(e))},Us=wa,zs=ne;var Ps=function(e){return zs(e)&&"[object Map]"==Us(e)},Rs=mn,Ds=wn.exports,qs=Ds&&Ds.isMap,Ms=qs?Rs(qs):Ps,Ls=wa,Ts=ne;var Ns=function(e){return Ts(e)&&"[object Set]"==Ls(e)},Fs=mn,Zs=wn.exports,Bs=Zs&&Zs.isSet,Gs=Bs?Fs(Bs):Ns,Js=kr,Vs=Sc,Ys=te,Ws=$c,Hs=Zc,Xs=Bc.exports,Ks=Gc,Qs=Yc,eu=ns,tu=Kn,ru=cs,nu=wa,au=us,ou=Ss,iu=Is,cu=re,su=fn.exports,uu=Ms,lu=S,fu=Gs,du=Yn,pu=Tc,hu="[object Arguments]",yu="[object Function]",gu="[object Object]",vu={};vu[hu]=vu["[object Array]"]=vu["[object ArrayBuffer]"]=vu["[object DataView]"]=vu["[object Boolean]"]=vu["[object Date]"]=vu["[object Float32Array]"]=vu["[object Float64Array]"]=vu["[object Int8Array]"]=vu["[object Int16Array]"]=vu["[object Int32Array]"]=vu["[object Map]"]=vu["[object Number]"]=vu[gu]=vu["[object RegExp]"]=vu["[object Set]"]=vu["[object String]"]=vu["[object Symbol]"]=vu["[object Uint8Array]"]=vu["[object Uint8ClampedArray]"]=vu["[object Uint16Array]"]=vu["[object Uint32Array]"]=!0,vu["[object Error]"]=vu[yu]=vu["[object WeakMap]"]=!1;var bu=function e(t,r,n,a,o,i){var c,s=1&r,u=2&r,l=4&r;if(n&&(c=o?n(t,a,o,i):n(t)),void 0!==c)return c;if(!lu(t))return t;var f=cu(t);if(f){if(c=au(t),!s)return Ks(t,c)}else{var d=nu(t),p=d==yu||"[object GeneratorFunction]"==d;if(su(t))return Xs(t,s);if(d==gu||d==hu||p&&!o){if(c=u||p?{}:iu(t),!s)return u?eu(t,Hs(c,t)):Qs(t,Ws(c,t))}else{if(!vu[d])return o?t:{};c=ou(t,d,s)}}i||(i=new Js);var h=i.get(t);if(h)return h;i.set(t,c),fu(t)?t.forEach((function(a){c.add(e(a,r,n,a,t,i))})):uu(t)&&t.forEach((function(a,o){c.set(o,e(a,r,n,o,t,i))}));var y=f?void 0:(l?u?ru:tu:u?pu:du)(t);return Vs(y||t,(function(a,o){y&&(a=t[o=a]),Ys(c,o,e(a,r,n,o,t,i))})),c},mu=bu;var wu=function(e){return mu(e,5)},_u=Da;var ju=function(e,t){return _u(e,t)},xu=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===Su}(e)}(e)};var Su="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Ou(e,t){return!1!==t.clone&&t.isMergeableObject(e)?$u((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function Cu(e,t,r){return e.concat(t).map((function(e){return Ou(e,r)}))}function Au(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function ku(e,t){try{return t in e}catch(e){return!1}}function Eu(e,t,r){var n={};return r.isMergeableObject(e)&&Au(e).forEach((function(t){n[t]=Ou(e[t],r)})),Au(t).forEach((function(a){(function(e,t){return ku(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,a)||(ku(e,a)&&r.isMergeableObject(t[a])?n[a]=function(e,t){if(!t.customMerge)return $u;var r=t.customMerge(e);return"function"==typeof r?r:$u}(a,r)(e[a],t[a],r):n[a]=Ou(t[a],r))})),n}function $u(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||Cu,r.isMergeableObject=r.isMergeableObject||xu,r.cloneUnlessOtherwiseSpecified=Ou;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):Eu(e,t,r):Ou(t,r)}$u.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return $u(e,r,t)}),{})};var Iu=$u,Uu="[object Symbol]",zu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ru="\\u2700-\\u27bf",Du="a-z\\xdf-\\xf6\\xf8-\\xff",qu="A-Z\\xc0-\\xd6\\xd8-\\xde",Mu="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lu="['’]",Tu="[\\ud800-\\udfff]",Nu="["+Mu+"]",Fu="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Zu="\\d+",Bu="[\\u2700-\\u27bf]",Gu="["+Du+"]",Ju="[^\\ud800-\\udfff"+Mu+Zu+Ru+Du+qu+"]",Vu="\\ud83c[\\udffb-\\udfff]",Yu="[^\\ud800-\\udfff]",Wu="(?:\\ud83c[\\udde6-\\uddff]){2}",Hu="[\\ud800-\\udbff][\\udc00-\\udfff]",Xu="["+qu+"]",Ku="(?:"+Gu+"|"+Ju+")",Qu="(?:"+Xu+"|"+Ju+")",el="(?:['’](?:d|ll|m|re|s|t|ve))?",tl="(?:['’](?:D|LL|M|RE|S|T|VE))?",rl="(?:"+Fu+"|"+Vu+")"+"?",nl="[\\ufe0e\\ufe0f]?",al=nl+rl+("(?:\\u200d(?:"+[Yu,Wu,Hu].join("|")+")"+nl+rl+")*"),ol="(?:"+[Bu,Wu,Hu].join("|")+")"+al,il="(?:"+[Yu+Fu+"?",Fu,Wu,Hu,Tu].join("|")+")",cl=RegExp(Lu,"g"),sl=RegExp(Fu,"g"),ul=RegExp(Vu+"(?="+Vu+")|"+il+al,"g"),ll=RegExp([Xu+"?"+Gu+"+"+el+"(?="+[Nu,Xu,"$"].join("|")+")",Qu+"+"+tl+"(?="+[Nu,Xu+Ku,"$"].join("|")+")",Xu+"?"+Ku+"+"+el,Xu+"+"+tl,Zu,ol].join("|"),"g"),fl=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),dl=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,pl="object"==typeof o&&o&&o.Object===Object&&o,hl="object"==typeof self&&self&&self.Object===Object&&self,yl=pl||hl||Function("return this")();var gl,vl=(gl={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(e){return null==gl?void 0:gl[e]});function bl(e){return fl.test(e)}function ml(e){return bl(e)?function(e){return e.match(ul)||[]}(e):function(e){return e.split("")}(e)}var wl=Object.prototype.toString,_l=yl.Symbol,jl=_l?_l.prototype:void 0,xl=jl?jl.toString:void 0;function Sl(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&wl.call(e)==Uu}(e))return xl?xl.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function Ol(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}(e,t,r)}function Cl(e){return null==e?"":Sl(e)}var Al,kl=(Al=function(e,t,r){return t=t.toLowerCase(),e+(r?$l(Cl(t).toLowerCase()):t)},function(e){return function(e,t,r,n){var a=-1,o=e?e.length:0;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}(function(e,t,r){return e=Cl(e),void 0===(t=r?void 0:t)?function(e){return dl.test(e)}(e)?function(e){return e.match(ll)||[]}(e):function(e){return e.match(zu)||[]}(e):e.match(t)||[]}(function(e){return(e=Cl(e))&&e.replace(Pu,vl).replace(sl,"")}(e).replace(cl,"")),Al,"")});var El,$l=(El="toUpperCase",function(e){var t=bl(e=Cl(e))?ml(e):void 0,r=t?t[0]:e.charAt(0),n=t?Ol(t,1).join(""):e.slice(1);return r[El]()+n});module.exports=kl;var Il=a(Object.freeze({__proto__:null})),Ul="[object Symbol]",zl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pl=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rl="\\u2700-\\u27bf",Dl="a-z\\xdf-\\xf6\\xf8-\\xff",ql="A-Z\\xc0-\\xd6\\xd8-\\xde",Ml="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ll="['’]",Tl="["+Ml+"]",Nl="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Fl="\\d+",Zl="[\\u2700-\\u27bf]",Bl="["+Dl+"]",Gl="[^\\ud800-\\udfff"+Ml+Fl+Rl+Dl+ql+"]",Jl="(?:\\ud83c[\\udde6-\\uddff]){2}",Vl="[\\ud800-\\udbff][\\udc00-\\udfff]",Yl="["+ql+"]",Wl="(?:"+Bl+"|"+Gl+")",Hl="(?:"+Yl+"|"+Gl+")",Xl="(?:['’](?:d|ll|m|re|s|t|ve))?",Kl="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ql="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",ef="[\\ufe0e\\ufe0f]?",tf=ef+Ql+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",Jl,Vl].join("|")+")"+ef+Ql+")*"),rf="(?:"+[Zl,Jl,Vl].join("|")+")"+tf,nf=RegExp(Ll,"g"),af=RegExp(Nl,"g"),of=RegExp([Yl+"?"+Bl+"+"+Xl+"(?="+[Tl,Yl,"$"].join("|")+")",Hl+"+"+Kl+"(?="+[Tl,Yl+Wl,"$"].join("|")+")",Yl+"?"+Wl+"+"+Xl,Yl+"+"+Kl,Fl,rf].join("|"),"g"),cf=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sf="object"==typeof o&&o&&o.Object===Object&&o,uf="object"==typeof self&&self&&self.Object===Object&&self,lf=sf||uf||Function("return this")();var ff=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"});var df=Object.prototype.toString,pf=lf.Symbol,hf=pf?pf.prototype:void 0,yf=hf?hf.toString:void 0;function gf(e){if("string"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&df.call(e)==Ul}(e))return yf?yf.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function vf(e){return null==e?"":gf(e)}var bf=function(e){return function(t){return function(e,t,r,n){var a=-1,o=e?e.length:0;for(n&&o&&(r=e[++a]);++a<o;)r=t(r,e[a],a,e);return r}(function(e,t,r){if(e=vf(e),void 0===(t=r?void 0:t))return function(e){return cf.test(e)}(e)?function(e){return e.match(of)||[]}(e):function(e){return e.match(zl)||[]}(e);return e.match(t)||[]}(function(e){return(e=vf(e))&&e.replace(Pl,ff).replace(af,"")}(t).replace(nf,"")),e,"")}}((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));module.exports=bf;var mf=Il,wf=a(Object.freeze({__proto__:null}));var _f=function e(t,r){return t&&t.constructor===Object?Object.keys(t).forEach((function(n){var a=t[n];delete t[n],"camel"===r?n=mf(n):"snake"===r?n=wf(n):"upper"===r?n=n.toUpperCase():"lower"===r?n=n.toLowerCase():"function"==typeof r&&(n=r(n)),t[n]=e(a,r)})):t&&t.constructor===Array&&(t=t.map((function(t){return e(t,r)}))),t};let jf={};function xf(e,t,r={}){if(!t||"object"!=typeof t)return e;if(!e||"object"!=typeof e)return e;return Iu(e,t,{arrayMerge:function(e,t,r){const n=e.slice();return t.forEach(((t,a)=>{void 0===n[a]?n[a]=r.cloneUnlessOtherwiseSpecified(t,r):r.isMergeableObject(t)?n[a]=xf(e[a],t,r):-1===e.indexOf(t)&&n.push(t)})),n}})}function Sf(e){return e&&"object"==typeof e&&!(e instanceof Array)}function Of(e){if(!e)return e;const t=JSON.parse(JSON.stringify(e));return _f(t,kf)}function Cf(e){if(!e)return e;const t=JSON.parse(JSON.stringify(e));return _f(t,Af)}function Af(e){return("$"===e[0]?"$":"")+xc(e).replace(/\_([0-9])/g,"$1")}function kf(e){return("$"===e[0]?"$":"")+jc(e).replace(/\_([0-9])/g,"$1")}function Ef(e){return"string"==typeof e?e.replace(/^[/]+/,""):""}function $f(e){return"string"==typeof e?e.replace(/[/]+$/,""):""}function If(a){return function(a,o,i,c){return o=o||"&",i=i||"=",null===a&&(a=void 0),"object"==typeof a?r(n(a),(function(n){var c=encodeURIComponent(t(n))+i;return e(a[n])?r(a[n],(function(e){return c+encodeURIComponent(t(e))})).join(o):c+encodeURIComponent(t(a[n]))})).join(o):c?encodeURIComponent(t(c))+i+encodeURIComponent(t(a)):""}(a)}function Uf(e,t,r){return e instanceof Array?e.reduce(t,r):r}function zf(){return!("undefined"!=typeof window&&window&&window.document)}function Pf(e){return"function"==typeof e}function Rf(e,t,r){return{list:r.indexOf("list")>=0?function(r){return e("get",t,void 0,r)}:void 0,get:r.indexOf("get")>=0?function(r,n){return e("get",t,r,n)}:void 0}}async function Df(e,t,r,n){const a=jf.vaultUrl,o=jf.timeout,i=`swell_vault_response_${window.__swell_vault_request_id=window.__swell_vault_request_id||0,window.__swell_vault_request_id++,window.__swell_vault_request_id}`;return r={$jsonp:{method:e,callback:i},$data:r,$key:jf.key},new Promise(((e,n)=>{const c=document.createElement("script");c.type="text/javascript",c.src=`${$f(a)}/${Ef(t)}?${function(e){const t=[],r=function(e,r){"function"==typeof r?r=r():null==r&&(r=""),t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(r)};for(const t in e)Mf(t,e[t],r);return t.join("&").replace(" ","+")}(r)}`;const s=setTimeout((()=>{window[i]({$error:`Request timed out after ${o/1e3} seconds`,$status:500})}),o);window[i]=t=>{if(clearTimeout(s),t&&t.$error){const e=new Error(t.$error);e.code="request_error",e.status=t.$status,n(e)}else if(!t||t.$status>=300){const e=new Error("A connection error occurred while making the request");e.code="connection_error",e.status=t.$status,n(e)}else e(jf.useCamelCase?Of(t.$data):t.$data);delete window[i],c.parentNode.removeChild(c)},document.getElementsByTagName("head")[0].appendChild(c)}))}const qf=/\[\]$/;function Mf(e,t,r){let n;if(t instanceof Array)for(let n=0;n<t.length;n++)qf.test(e)?r(e,v):Mf(e+"["+("object"==typeof v&&null!=v?n:"")+"]",v,r);else if(t&&"object"==typeof t)for(n in t)Mf(e+"["+n+"]",t[n],r);else r(e,t)}const Lf={async createToken(e){let t=null,r=null,n=null;e||(t="Card details are missing in `swell.card.createToken(card)`",n="");const a=Cf(e);if(!a.nonce){if(this.validateNumber(a.number)||(t="Card number appears to be invalid",r="invalid_card_number",n="number"),a.exp){const e=this.expiry(a.exp);a.exp_month=e.month,a.exp_year=e.year}this.validateExpiry(a.exp_month,a.exp_year)||(t="Card expiry appears to be invalid",r="invalid_card_expiry",n="exp_month"),this.validateCVC(a.cvc)||(t="Card CVC code appears to be invalid",r="invalid_card_cvc",n="exp_cvc")}if(t){const e=new Error(t);throw e.code=r||"invalid_card",e.status=402,e.param=n,e}const o=await Df("post","/tokens",a);if(o.errors){const e=Object.keys(o.errors)[0],t=new Error(o.errors[e].message||"Unknown error");throw t.code="vault_error",t.status=402,t.param=e,t}return o},expiry(e){if(e&&e.month&&e.year)return e;const t=new String(e).split(/[\s\/\-]+/,2),r=t[0];let n=t[1];if(n&&2===n.length&&/^\d+$/.test(n)){n=(new Date).getFullYear().toString().substring(0,2)+n}return{month:~~r,year:~~n}},types(){let e,t,r,n;for(t={},e=r=40;r<=49;e=++r)t[e]="Visa";for(e=n=50;n<=59;e=++n)t[e]="MasterCard";return t[34]=t[37]="American Express",t[60]=t[62]=t[64]=t[65]="Discover",t[35]="JCB",t[30]=t[36]=t[38]=t[39]="Diners Club",t},type(e){return this.types()[e.slice(0,2)]||"Unknown"},luhnCheck(e){let t,r,n,a,o,i;for(n=!0,a=0,r=(e+"").split("").reverse(),o=0,i=r.length;o<i;o++)t=r[o],t=parseInt(t,10),(n=!n)&&(t*=2),t>9&&(t-=9),a+=t;return a%10==0},validateNumber(e){return(e=(e+"").replace(/\s+|-/g,"")).length>=10&&e.length<=16&&this.luhnCheck(e)},validateExpiry(e,t){let r,n;return e=String(e).trim(),t=String(t).trim(),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(parseInt(e,10)<=12&&(n=new Date(t,e),r=new Date,n.setMonth(n.getMonth()-1),n.setMonth(n.getMonth()+1,1),n>r)))},validateCVC:e=>(e=String(e).trim(),/^\d+$/.test(e)&&e.length>=3&&e.length<=4)};function Tf(e){if(zf())return;const t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function Nf(e,t,r={}){if(zf())return;const n=new Date;n.setDate(n.getDate()+7),(r={path:"/",expires:n.toUTCString(),...r}).expires&&r.expires.toUTCString&&(r.expires=r.expires.toUTCString());let a=encodeURIComponent(e)+"="+encodeURIComponent(t);for(const e in r){a+="; "+e;const t=r[e];!0!==t&&(a+="="+t)}document.cookie=a}let Ff={};const Zf={options:{enabled:!0,debug:!1},debug(...e){this.options.debug&&console.log(...e)},values({model:e,id:t},r){if(this.debug("cache.values",...arguments),void 0===r)return Zt(Ff,`${e}.${t}`,{});for(let n in r)Mt(Ff,`${e}.${t}.${n}`,r[n])},preset(e){this.debug("cache.preset",...arguments);const{presets:t=[]}=this.values(e);t.push(e),this.values(e,{presets:t})},set(e){this.debug("cache.set",...arguments);let{model:t,id:r,path:n,value:a}=e,{data:o={},record:i,presets:c}=this.values(e);if(null===r)return;if(void 0===i)return this.preset(e);o=xf(i||{},o);const{useCamelCase:s}=jf;if(s&&a&&"object"==typeof a&&(a=Of(a)),n||a instanceof Array){let e={...o||{}},t=s?"string"==typeof(u=n)?u.split(".").map(jc).join("."):u:n;Mt(e,t||"",a),o=e}else a&&"object"==typeof a?(o=o||{},o=xf(o,a)):o=a;var u;this.values(e,{data:o});try{const e=Ff[t][r];void 0!==e&&(void 0!==e.data&&(e.data=JSON.parse(JSON.stringify(e.data))),void 0!==e.record&&(e.record=JSON.parse(JSON.stringify(e.record))))}catch(e){}},get(e,t){this.debug("cache.get",...arguments);const{data:r,recordTimer:n}=this.values({model:e,id:t});if(this.debug("cache.get:data+recordTimer",...arguments),n)return r},setRecord(e,t){this.debug("cache.setRecord",...arguments);let{recordTimer:r,presets:n}=this.values(t);if(r&&clearTimeout(r),r=setTimeout((()=>{this.values(t,{record:void 0,recordTimer:void 0})}),5e3),this.values(t,{record:void 0!==e?e:null,recordTimer:r}),n){for(let e of n)this.set(e);this.values(t,{presets:void 0})}const a=this.get(t.model,t.id);return void 0!==a?a:e},async getFetch(e,t,r){if(this.options.enabled){this.debug("cache.getFetch",...arguments);const r=this.get(e,t);if(void 0!==r)return r}const n=await r();return this.setRecord(n,{model:e,id:t})},clear(e,t){this.debug("cache.clear",...arguments),e?Mt(Ff,t?`${e}.${t}`:e,void 0):Ff={}}};function Bf(e){const{get:t,list:r}=Rf(e,"/attributes",["list","get"]);return{get:(e,...r)=>Zf.getFetch("attributes",e,(()=>t(e,...r))),list:r}}let Gf;function Jf(e){let t=e||[];if(e&&"object"==typeof e&&!(e instanceof Array)){t=[];for(const r in e)t.push({id:r,value:e[r]})}return t instanceof Array?t.map((e=>({id:e.id||e.name,value:e.value}))):t}function Vf(e,t,r){const n=Gf.useCamelCase?Cf(e):e,a=Yf(n,r),o={...n,price:a.price||0,sale_price:a.sale_price,orig_price:a.orig_price,stock_status:n.stock_status};let i=0;const c=[],s=Jf(t),u=function(e,t){return e.options?Uf(t?e.options.filter(t):e.options,((e,t)=>{const r=Uf(t.values,((e,t)=>({...e,[t.id]:{...t,id:t.id},[t.name]:{...t,id:t.id}})),{});return{...e,[t.id]:{...t,values:r},[t.name]:{...t,values:r}}}),{}):{}}(n);for(const e of s)u[e.id]&&u[e.id].values[e.value]&&(u[e.id].variant?c.push(u[e.id].values[e.value].id):i+=u[e.id].values[e.value].price||0);if(c.length>0){const e=function(e,t){if(t.length>0){const r=e.variants&&e.variants.results;if(r.length>0)for(const e of r){const r=Cf(e);if(ju(r.option_value_ids.sort(),t.sort()))return e}}return null}(n,c);if(e){let t=a;try{t=Yf(e,r)}catch(e){}o.variant_id=e.id,o.price=t.price||0,o.sale_price=t.sale_price||a.sale_price,o.orig_price=t.orig_price||a.orig_price,o.stock_status=e.stock_status,o.stock_level=e.stock_level||0,o.images=(e.images&&e.images.length?e.images:n.images)||[]}}return i>0&&(o.price+=i,o.sale_price&&(o.sale_price+=i),o.orig_price&&(o.orig_price+=i)),void 0===o.sale_price&&delete o.sale_price,void 0===o.orig_price&&delete o.orig_price,Gf.useCamelCase?Of(o):o}function Yf(e,t){const r=Zt(t,"plan_id",Zt(t,"plan")),n=Zt(t,"type","string"==typeof t?t:void 0!==r?"subscription":"standard");let a=Zt(e,`purchase_options.${n}`);if(!a&&"standard"!==n)throw new Error(`Product purchase option '${n}' not found or not active`);if(a){if(a.plans)if(void 0!==r){if(a=Ko(a.plans,{id:r}),!a)throw new Error(`Subscription purchase plan '${r}' not found or not active`)}else a=a.plans[0];return{...a,price:"number"==typeof a.price?a.price:e.price,sale_price:"number"==typeof a.sale_price?a.sale_price:e.sale_price,orig_price:"number"==typeof a.orig_price?a.orig_price:e.orig_price}}return{type:"standard",price:e.price,sale_price:e.sale_price,orig_price:e.orig_price}}function Wf(e,t={}){let r=(t.attributes||void 0===t.attributes)&&Xf(e);t.filterableAttributes&&(r=r.filter((e=>t.filterableAttributes.find((t=>e.id===t.id)))));const n=(t.categories||void 0===t.categories)&&Hf(e),a=(t.price||void 0===t.price)&&Kf(e);let o=[];return a&&o.push({id:"price",label:"Price",type:"range",options:[{value:a.min,label:a.min},{value:a.max,label:a.max}],interval:a.interval}),n&&n.length>0&&o.push({id:"category",label:"Category",type:"select",options:n.map((e=>({value:e.slug,label:e.name})))}),r&&r.length>0&&(o=[...o,...Uf(r,((e,t)=>[...e,..."category"!==t.id&&"price"!==t.id&&t.values instanceof Array&&t.values.length>0?[{id:t.id,label:t.name,type:"select",options:t.values.map((e=>({value:e,label:e})))}]:[]]),[])]),o}function Hf(e){const t=[],r=e&&e.results||(e.id?[e]:e);if(r instanceof Array)for(let e of r)if(e.categories)for(let r of e.categories){if(!r)continue;Ko(t,{id:r.id})||t.push(r)}return t}function Xf(e){const t=[],r=e&&e.results||(e.id?[e]:e);if(r instanceof Array)for(let e of r)if(e.attributes)for(let r in e.attributes){if(!e.attributes[r])continue;const n=e.attributes[r].value;let a=Ko(t,{id:xc(r)});a?a.values=gr([...a.values,...n instanceof Array?n:[n]]):t.push({...e.attributes[r],value:void 0,values:[...n instanceof Array?n:[n]]})}return t}function Kf(e){let t,r,n;const a=e&&e.results||(e.id?[e]:e);if(a instanceof Array)for(let e of a)(void 0===r||e.price>r)&&(r=Math.ceil(e.price)),(void 0===t||e.price<t)&&(t=Math.floor(e.price));if(t===r)return null;for(n=Math.ceil((r-t)/10)||1,n>1e3?n=1e3:n>100?n=100:n>10&&(n=10),r%n>0&&(r=n+r-r%n),t%n>0&&(t-=t%n);(r-t)/n%1>0;)r++;return{min:t,max:r,interval:n}}function Qf(e,t){return{state:null,order:null,settings:null,requested:!1,pendingRequests:[],cacheClear:null,async requestStateChange(t,r,n,a){return this.requestStateSync((async()=>{const o=await e(t,r,n,a);return o&&o.errors||(this.state=o),o}))},async requestStateSync(e){if(this.state)return await e();if(this.requested)return new Promise((t=>{this.pendingRequests.push({handler:e,resolve:t})}));this.requested=!0;const t=await e();for(this.requested=!1;this.pendingRequests.length>0;){const{handler:e,resolve:t}=this.pendingRequests.shift();t(e())}return t},get(){let e;return this.cacheClear&&(this.cacheClear=null,e={$cache:!1}),this.requestStateChange("get","/cart",void 0,e)},clearCache(){this.cacheClear=!0},getItemData(e,t={}){let r=wu(e);return"string"==typeof e&&(r={...t||{},product_id:e}),r&&r.options&&(r.options=Jf(r.options)),r},addItem(e,t){return this.requestStateChange("post","/cart/items",this.getItemData(e,t))},updateItem(e,t){return this.requestStateChange("put",`/cart/items/${e}`,this.getItemData(t))},setItems(e){let t=e;return t&&t.map&&(t=t.map(this.getItemData)),this.requestStateChange("put","/cart/items",t)},removeItem(e){return this.requestStateChange("delete",`/cart/items/${e}`)},recover(e){return this.requestStateChange("put",`/cart/recover/${e}`)},update(e){let t=e;return t.items&&t.items.map&&(t={...t,items:t.items.map(this.getItemData)}),this.requestStateChange("put","/cart",t)},applyCoupon(e){return this.requestStateChange("put","/cart/coupon",{code:e})},removeCoupon(){return this.requestStateChange("delete","/cart/coupon")},applyGiftcard(e){return this.requestStateChange("post","/cart/giftcards",{code:e})},removeGiftcard(e){return this.requestStateChange("delete",`/cart/giftcards/${e}`)},async getShippingRates(){return await this.requestStateChange("get","/cart/shipment-rating"),this.state[t.useCamelCase?"shipmentRating":"shipment_rating"]},async submitOrder(){const t=await e("post","/cart/order");return t.errors||(this.state=null,this.order=t),t},async getOrder(t){let r;return r=t?await e("get","/cart/order",{checkout_id:t}):await e("get","/cart/order"),this.order=r,r},async getSettings(){return this.settings=await e("get","/cart/settings"),this.settings}}}function ed(e,t){return{state:null,menuState:null,paymentState:null,subscriptionState:null,sessionState:null,localizedState:{},refresh(){return this.state=null,this.menuState=null,this.paymentState=null,this.subscriptionState=null,this.sessionState=null,this.localizedState={},this.get()},getState(t,r,{id:n,def:a,refresh:o=!1}={}){return this[r]&&!o||(this[r]=e("get",t)),this[r]&&"function"==typeof this[r].then?this[r].then((e=>(this[r]=e,this.getLocalizedState(r,n,a)))):this.getLocalizedState(r,n,a)},getLocalizedState(e,t,r){const n=this.getCurrentLocale(),a=this.localizedState;return a.code!==n&&(a.code=n,delete a[n]),a[n]||(a[n]={}),a[n][e]||(a[n][e]=this.decodeLocale(this[e])),t?Zt(a[n][e],t,r):a[n][e]},findState(e,t,{where:r,def:n}={}){const a=this.getState(e,t);return a&&"function"==typeof a.then?a.then((e=>Ko(e,r)||n)):Ko(a,r)||n},get(e,t){return this.getState("/settings","state",{id:e,def:t})},getCurrentLocale:()=>t.api.locale.selected(),getStoreLocale(){return Zt(this.state,"store.locale")},getStoreLocales(){return Zt(this.state,"store.locales")},set({model:e,path:r,value:n}){const a=this.getCurrentLocale(),o=e?`${e.replace(/s$/,"")}State`:"state",{useCamelCase:i}=t;let c={};r?Mt(c,r,n):c=n,i&&(c=Of(c)),this[o]=xf(this[o]||{},c),this.localizedState[a]&&(this.localizedState[a][o]=this.decodeLocale(this[o]))},menus(e,t){return this.findState("/settings/menus","menuState",{where:{id:e},def:t})},payments(e,t){return this.getState("/settings/payments","paymentState",{id:e,def:t})},subscriptions(e,t){return this.getState("/settings/subscriptions","subscriptionState",{id:e,def:t})},session(e,t){return this.getState("/session","sessionState",{id:e,def:t})},decodeLocale(e){const r=this.getCurrentLocale();if(!e||"object"!=typeof e)return e;let n=this.getStoreLocales();return n=n?n.reduce(((e,t)=>({...e,[t.code]:t})),{}):{},td(wu(e),r,n,t)},async load(){try{const{settings:t,menus:r,payments:n,subscriptions:a,session:o}=await e("get","/settings/all");this.localizedState={},this.set({value:t}),this.set({model:"menus",value:r}),this.set({model:"payments",value:n}),this.set({model:"subscriptions",value:a}),this.set({model:"session",value:o})}catch(e){console.error(`Swell: unable to loading settings (${e})`)}}}}function td(e,t,r,n){if(Sf(e)){const a=Object.keys(e);for(let o of a)"$locale"===o&&(rd(t,e,o,r,n),delete e.$locale),void 0!==e[o]&&(e[o]=td(e[o],t,r,n))}else if(e instanceof Array)for(var a=0;a<e.length;a++)e[a]=td(e[a],t,r,n);return e}function rd(e,t,r,n,a){if(!e||!Sf(t[r]))return;let o,i;const c=Object.keys(t[r]);for(let t of c){const r=t.replace(/\-.+$/,""),c=a.useCamelCase?jc(e):e;t!==e&&t!==c&&r!==c||(o=e,i=n[e])}if(!o&&Sf(n)){const t=Object.keys(n);for(let r of t){const t=r.replace(/\-.+$/,"");r!==e&&t!==e||(o=r,i=n[r])}}let s,u={};if(i){let e=i.fallback;const a=e;for(;e&&(s=s||[],s.push(e),u={...t[r][e]||{},...u},e=n[e]&&n[e].fallback,a!==e););}let l={...u,...t[r][o]||{}};const f=Object.keys(l);for(let e of f){const n=null!==l[e]&&""!==l[e];let a=s&&!n;if(a)for(let n of s){if(a=!t[r][n]||null===t[r][n][e]||""===t[r][n][e],!a){t[e]=t[r][n][e];break}if("none"===n){t[e]=null;break}}else n&&(t[e]=l[e])}}var nd=_t;var ad=function(e){return nd(e).toLowerCase()};var od=function(e){return function(t,r,n){for(var a=-1,o=Object(t),i=n(t),c=i.length;c--;){var s=i[e?c:++a];if(!1===r(o[s],s,o))break}return t}},id=od(),cd=Yn;var sd=function(e,t){return e&&id(e,t,cd)},ud=Bn;var ld=function(e,t){return function(r,n){if(null==r)return r;if(!ud(r))return e(r,n);for(var a=r.length,o=t?a:-1,i=Object(r);(t?o--:++o<a)&&!1!==n(i[o],o,i););return r}}(sd);var fd=Pi,dd=ld,pd=ko,hd=function(e,t,r,n,a){return a(e,(function(e,a,o){r=n?(n=!1,e):t(r,e,a,o)})),r},yd=re;var gd=function(e,t,r){var n=yd(e)?fd:hd,a=arguments.length<3;return n(e,pd(t),r,a,dd)},vd=Nn,bd=wa,md=ln,wd=re,_d=Bn,jd=fn.exports,xd=Rn,Sd=On,Od=Object.prototype.hasOwnProperty;var Cd=function(e){if(null==e)return!0;if(_d(e)&&(wd(e)||"string"==typeof e||"function"==typeof e.splice||jd(e)||Sd(e)||md(e)))return!e.length;var t=bd(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(xd(e))return!vd(e).length;for(var r in e)if(Od.call(e,r))return!1;return!0},Ad=ld,kd=Bn;var Ed=pt,$d=ko,Id=function(e,t){var r=-1,n=kd(e)?Array(e.length):[];return Ad(e,(function(e,a,o){n[++r]=t(e,a,o)})),n},Ud=re;var zd=function(e,t){return(Ud(e)?Ed:Id)(e,$d(t))};const Pd={city:"city",country:"country",line1:"address1",line2:"address2",postal_code:"zip",state:"state"},Rd={name:"name",phone:"phone"};function Dd(e){const{account:t={},billing:r,shipping:n}=e,a={...Zt(t,"shipping",{}),...Zt(t,"billing",{}),...n,...r},o=e=>gd(e,((e,t,r)=>{const n=a[t];return n&&(e[r]=n),e}),{}),i=o(Rd);if(!Cd(i)){const e=o(Pd);return{...i,...Cd(e)?{}:{address:e}}}}function qd(e){const t=ad(Zt(e,"currency","eur")),r=zd(e.items,(e=>({type:"sku",description:e.product.name,quantity:e.quantity,currency:t,amount:Math.round(100*Zo(e.price_total-e.discount_total))}))),n=Zt(e,"tax_included_total");n&&r.push({type:"tax",description:"Taxes",currency:t,amount:Math.round(100*Zo(n))});const a=Zt(e,"shipping",{}),o=Zt(e,"shipment_total",{});return a.price&&r.push({type:"shipping",description:a.service_name,currency:t,amount:Math.round(100*Zo(o))}),r}async function Md(e,t){const r={type:"klarna",flow:"redirect",amount:Math.round(100*Zt(t,"grand_total",0)),currency:ad(Zt(t,"currency","eur")),klarna:{product:"payment",purchase_country:Zt(t,"settings.country","DE")},source_order:{items:qd(t)},redirect:{return_url:window.location.href}};return function(e,t){const r=(e,t)=>gd(e,((e,r,n)=>{const a=t[r];return a&&(e[n]=a),e}),{});e.klarna={...e.klarna,...r({shipping_first_name:"first_name",shipping_last_name:"last_name"},t.shipping)};const n=r({phone:"phone"},t.shipping),a=r(Pd,t.shipping);(n||a)&&(e.source_order.shipping={...n||{},...a?{address:a}:{}}),e.klarna={...e.klarna,...r({first_name:"first_name",last_name:"last_name"},t.billing||Zt(t,"account.billing")||t.shipping)};const o=r({email:"email"},t.account),i=r(Pd,t.billing||Zt(t,"account.billing")||t.shipping);(o||i)&&(e.owner={...o||{},...i?{address:i}:{}})}(r,t),await e.createSource(r)}async function Ld(e,t){const r={type:"bancontact",amount:Math.round(100*Zt(t,"grand_total",0)),currency:ad(Zt(t,"currency","eur")),redirect:{return_url:window.location.href}};return function(e,t){const{account:r={},billing:n,shipping:a}=t,o={...r.shipping,...r.billing,...a,...n},i=((e,t)=>gd(e,((e,r,n)=>{const a=t[r];return a&&(e[n]=a),e}),{}))(Pd,o);e.owner={email:r.email,name:o.name||r.name,...o.phone?{phone:o.phone}:r.phone?{phone:r.phone}:{},...Cd(i)?{}:{address:i}}}(r,t),await e.createSource(r)}function Td(e,t){return["BIF","DJF","JPY","KRW","PYG","VND","XAF","XPF","CLP","GNF","KMF","MGA","RWF","VUV","XOF"].includes(e.toUpperCase())?t:Math.round(100*t)}const Nd={given_name:"first_name",family_name:"last_name",city:"city",country:"country",phone:"phone",postal_code:"zip",street_address:"address1",street_address2:"address2",region:"state"},Fd=(e,t)=>{return{...(r=Nd,n=e[t],gd(r,((e,t,r)=>{const a=n[t];return a&&(e[r]=a),e}),{})),email:Zt(e,"account.email")};var r,n};function Zd(e){const t=zd(e.items,(e=>({type:"physical",name:Zt(e,"product.name"),reference:Zt(e,"product.sku")||Zt(e,"product.slug"),quantity:e.quantity,unit_price:Math.round(100*Zo(e.price-e.discount_each)),total_amount:Math.round(100*Zo(e.price_total-e.discount_total)),tax_rate:0,total_tax_amount:0}))),r=Zt(e,"tax_included_total"),n=100*Zo(r);r&&t.push({type:"sales_tax",name:"Taxes",quantity:1,unit_price:n,total_amount:n,tax_rate:0,total_tax_amount:0});const a=Zt(e,"shipping",{}),o=Zt(e,"shipment_total",{}),i=100*Zo(o);return a.price&&t.push({type:"shipping_fee",name:a.service_name,quantity:1,unit_price:i,total_amount:i,tax_rate:0,total_tax_amount:0}),t}const Bd={},Gd={},Jd={};let Vd=null;function Yd(e,t){return Vd=t||Vd,{params:null,methodSettings:null,get:t=>e("get","/payments",t),async methods(){if(this.methodSettings)return this.methodSettings;const t=await e("get","/payment/methods");return this.methodSettings=t},async createElements(t){this.params=t||{};const r=Cf(await Qf(e,Vd).get());if(!r)throw new Error("Cart not found");const n=Cf(await ed(e,Vd).payments());if(n.error)throw new Error(n.error);await async function(e,t,r,n){n.card&&(r.card?"braintree"===r.card.gateway?window.braintree||await Wd("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"):"stripe"===r.card.gateway&&(window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),await Hd(e,r,n)):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.ideal&&(r.card?r.ideal?"stripe"===r.card.gateway&&(window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),await Hd(e,r,n)):console.error("Payment element error: iDEAL payments are disabled. See Payment settings in the Swell dashboard for details."):console.error("Payment element error: credit card payments are disabled. See Payment settings in the Swell dashboard for details."));n.paypal&&(r.paypal?r.card&&"braintree"===r.card.gateway&&"braintree"===r.paypal.gateway?(window.paypal||await Wd("paypal-sdk",`https://www.paypal.com/sdk/js?currency=${t.currency}&client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&vault=true`),window.braintree||await Wd("braintree-web","https://js.braintreegateway.com/web/3.57.0/js/client.min.js"),window.braintree&&!window.braintree.paypalCheckout&&await Wd("braintree-web-paypal-checkout","https://js.braintreegateway.com/web/3.57.0/js/paypal-checkout.min.js"),await async function(e,t,r,n){const a=await Df("post","/authorization",{gateway:"braintree"});if(a.error)throw new Error(a.error);const o=window.braintree,i=window.paypal;o.client.create({authorization:a}).then((e=>o.paypalCheckout.create({client:e}))).then((r=>i.Buttons({style:n.paypal.style||{},createBillingAgreement:()=>r.createPayment({flow:"vault",currency:t.currency,amount:t.grand_total}),onApprove:(t,a)=>r.tokenizePayment(t).then((({nonce:t})=>Qf(e,Vd).update({billing:{paypal:{nonce:t}}}))).then((()=>Pf(n.paypal.onSuccess)&&n.paypal.onSuccess(t,a))).catch(Pf(n.paypal.onError)?n.paypal.onError:e=>console.error("PayPal error",e)),onCancel:Pf(n.paypal.onCancel)?()=>n.paypal.onCancel():()=>console.log("PayPal payment cancelled"),onError:Pf(n.paypal.onError)?e=>n.paypal.onError(e):e=>console.error("PayPal error",e)}).render(n.paypal.elementId||"#paypal-button"))).catch(Pf(n.paypal.onError)?n.paypal.onError:e=>console.error("PayPal error",e))}(e,t,0,n)):(window.paypal||await Wd("paypal-sdk",`https://www.paypal.com/sdk/js?currency=${t.currency}&client-id=${r.paypal.client_id}&merchant-id=${r.paypal.merchant_id}&intent=authorize&commit=false`),await async function(e,t,r,n){const a=window.paypal,{paypal:{locale:o,style:i,elementId:c}={}}=n,{capture_total:s,currency:u,guest:l}=t,f=e=>{const t=Zt(n,"paypal.onError");if(Pf(t))return t(e);throw new Error(e.message)},d=()=>{const e=Zt(n,"paypal.onSuccess");return Pf(e)&&e()};if(!(s>0))throw new Error("Invalid PayPal button amount. Value should be greater than zero.");a.Buttons({locale:o||"en_US",style:i||{layout:"horizontal",height:45,color:"gold",shape:"rect",label:"paypal",tagline:!1},createOrder:(e,t)=>t.order.create({intent:"AUTHORIZE",purchase_units:[{amount:{value:+s.toFixed(2),currency_code:u}}]}),onApprove:(t,r)=>r.order.get().then((async t=>{const r=t.id,n=t.payer,a=Zt(t,"purchase_units[0].shipping"),o=await async function(e,t,r){if(!e)return!1;const n=await Qf(t,r).get();return!Zt(n,"account.email")}(l,e,Vd);return Qf(e).update({...o&&{account:{email:n.email_address}},billing:{method:"paypal",paypal:{order_id:r}},shipping:{name:a.name.full_name,address1:a.address.address_line_1,address2:a.address.address_line_2,state:a.address.admin_area_1,city:a.address.admin_area_2,zip:a.address.postal_code,country:a.address.country_code}})})).then(d).catch(f)},f).render(c||"#paypal-button")}(e,t,0,n)):console.error("Payment element error: PayPal payments are disabled. See Payment settings in the Swell dashboard for details."))}(e,r,n,this.params)},async tokenize(t){const r=Cf(await Qf(e,Vd).get());if(!r)throw new Error("Cart not found");const n=Cf(await ed(e,Vd).payments());if(n.error)throw new Error(n.error);return await async function(e,t,r,n){const{capture_total:a,auth_total:o}=n,i=e=>{const r=Zt(t,"card.onError")||Zt(t,"ideal.onError")||Zt(t,"klarna.onError")||Zt(t,"bancontact.onError")||Zt(t,"paysafecard.onError");if(Pf(r))return r(e);throw new Error(e.message)},c=e=>{const r=Zt(t,"card.onSuccess")||Zt(t,"ideal.onSuccess");if(Pf(r))return r(e)};if(!t)return i({message:"Tokenization parameters not passed"});if(t.card&&r.card){if("stripe"===r.card.gateway&&Gd.stripe&&Jd.stripe){const t=Jd.stripe,r=await async function(e,t,r){const n=Dd(r),{error:a,paymentMethod:o}=await e.createPaymentMethod({type:"card",card:t,...n?{billing_details:n}:{}});return a?{error:a}:{token:o.id,last4:o.card.last4,exp_month:o.card.exp_month,exp_year:o.card.exp_year,brand:o.card.brand,address_check:o.card.checks.address_line1_check,cvc_check:o.card.checks.cvc_check,zip_check:o.card.checks.address_zip_check}}(t,Gd.stripe,n);if(r.error)return i(r.error);if(a<1)return Qf(e,Vd).update({billing:{method:"card",card:r}}).then(c).catch(i);const s=ad(Zt(n,"currency","usd")),u=Td(s,a+o),l=Zt(n,"account.stripe_customer"),f=Cf(await Yd(e).createIntent({gateway:"stripe",intent:{payment_method:r.token,amount:u,currency:s,capture_method:"manual",setup_future_usage:"off_session",...l?{customer:l}:{}}}).catch(i));if(f&&"requires_confirmation"===f.status){const{paymentIntent:n,error:a}=await t.confirmCardPayment(f.client_secret);return a?i(a):await Qf(e,Vd).update({billing:{method:"card",card:r,intent:{stripe:{id:n.id,...!!o&&{auth_amount:o}}}}}).then(c).catch(i)}}else if("quickpay"===r.card.gateway){const t=await async function(e,t){return await t({gateway:"quickpay",intent:{currency:Zt(e,"currency","USD"),order_id:Math.random().toString(36).substr(2,9)}})}(n,Yd(e).createIntent).catch(i);if(!t)return;if(t.error)return i(t.error);await Qf(e,Vd).update({billing:{method:"card",intent:{quickpay:{id:t}}}}),async function(e){const t=window.location.origin+window.location.pathname,r=await e({gateway:"quickpay",params:{action:"create",continueurl:`${t}?gateway=quickpay&redirect_status=succeeded`,cancelurl:`${t}?gateway=quickpay&redirect_status=canceled`}});r&&r.url&&window.location.replace(r.url)}(Yd(e).authorizeGateway).catch(i)}}else if(t.ideal&&r.ideal){if(r.card&&"stripe"===r.card.gateway&&Gd.stripe&&Jd.stripe){const{error:t,paymentMethod:r}=await async function(e,t,r={}){const n=Dd(r);return await e.createPaymentMethod({type:"ideal",ideal:t,...n?{billing_details:n}:{}})}(Jd.stripe,Gd.stripe,n.billing);if(t)return i(t);const o=ad(Zt(n,"currency","eur")),c=Td(o,a),s=Cf(await Yd(e).createIntent({gateway:"stripe",intent:{payment_method:r.id,amount:c,currency:o,payment_method_types:"ideal",confirmation_method:"manual",confirm:!0,return_url:window.location.href}}).catch(i));if(s)return await Qf(e,Vd).update({billing:{method:"ideal",ideal:{token:r.id},intent:{stripe:{id:s.id}}}}).catch(i),("requires_action"===s.status||"requires_source_action"===s.status)&&await Jd.stripe.handleCardAction(s.client_secret)}}else if(t.klarna&&r.klarna){if("klarna"===r.klarna.gateway){const t=await async function(e,t){const r=`${window.location.origin}${window.location.pathname}?gateway=klarna_direct&sid={{session_id}}`,n=`${r}&authorization_token={{authorization_token}}`;return t({gateway:"klarna",intent:{locale:e.display_locale||Zt(e,"settings.locale")||"en-US",purchase_country:Zt(e,"billing.country")||Zt(e,"shipping.country"),purchase_currency:e.currency,billing_address:Fd(e,"billing"),shipping_address:Fd(e,"shipping"),order_amount:Math.round(100*Zt(e,"grand_total",0)),order_lines:JSON.stringify(Zd(e)),merchant_urls:{success:n,back:r,cancel:r,error:r,failure:r}}})}(n,Yd(e).createIntent).catch(i);return t&&window.location.replace(t.redirect_url)}if(r.card&&"stripe"===r.card.gateway){window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/");const{publishable_key:t}=r.card,a=window.Stripe(t),o=Cf(await ed(e,Vd).get()),{error:c,source:s}=await Md(a,{...n,settings:o.store});return c?i(c):Qf(e,Vd).update({billing:{method:"klarna"}}).then((()=>window.location.replace(s.redirect.url))).catch(i)}}else if(t.bancontact&&r.bancontact){if(r.card&&"stripe"===r.card.gateway){window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/");const{publishable_key:t}=r.card,a=window.Stripe(t),{error:o,source:c}=await Ld(a,n);return o?i(o):Qf(e,Vd).update({billing:{method:"bancontact"}}).then((()=>window.location.replace(c.redirect.url))).catch(i)}}else if(t.paysafecard&&r.paysafecard){const t=await async function(e,t){const r=`${window.location.origin+window.location.pathname}?gateway=paysafecard`;return await t({gateway:"paysafecard",intent:{type:"PAYSAFECARD",amount:e.grand_total,redirect:{success_url:r,failure_url:r},notification_url:r,customer:{id:Zt(e,"account.id")},currency:Zt(e,"currency","USD")}})}(n,Yd(e).createIntent).catch(i);if(!t)return;return await Qf(e,Vd).update({billing:{method:"paysafecard",intent:{paysafecard:{id:t.id}}}}),window.location.replace(t.redirect.auth_url)}}(e,t||this.params,n,r)},async handleRedirect(t){const r=Cf(await Qf(e,Vd).get());if(!r)throw new Error("Cart not found");return await async function(e,t,r){const n=e=>{const r=Zt(t,"card.onError")||Zt(t,"paysafecard.onError")||Zt(t,"klarna.onError");if(Pf(r))return r(e);throw new Error(e.message)},a=e=>{const r=Zt(t,"card.onSuccess")||Zt(t,"paysafecard.onSuccess")||Zt(t,"klarna.onSuccess");if(Pf(r))return r(e)},o=function(e){const t=e.search.substr(1),r={};return t.split("&").forEach((function(e){const t=e.split("=");r[t[0]]=decodeURIComponent(t[1])})),r}(window.location);!function(){const e=window.location.origin+window.location.pathname;window.history.pushState({path:e},"",e)}();const{gateway:i}=o;let c;"quickpay"===i?c=await async function(e,t,r,n){const{redirect_status:a,card_id:o}=n;switch(a){case"succeeded":const t=await async function(e,t){return await t({gateway:"quickpay",params:{action:"get",id:e}})}(o,Yd(e).authorizeGateway);return t?t.error?t:(await Qf(e,Vd).update({billing:{method:"card",card:t}}),{success:!0}):void 0;case"canceled":return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};default:return{error:{message:`Unknown redirect status: ${a}.`}}}}(e,0,0,o):"paysafecard"===i?c=await async function(e,t){const r=Zt(t,"billing.intent.paysafecard.id");if(!r)return{error:{message:"Paysafecard payment ID not defined."}};const n=await Yd(e).updateIntent({gateway:"paysafecard",intent:{payment_id:r}});if(!n)return;switch(n.status){case"AUTHORIZED":return{success:!0};case"CANCELED_CUSTOMER":return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};default:return{error:{message:`Unknown redirect status: ${n.status}.`}}}}(e,r):"klarna_direct"===i&&(c=await async function(e,t,r,n){const{authorization_token:a}=n;if(!a)return{error:{message:"We are unable to authenticate your payment method. Please choose a different payment method and try again."}};return await Qf(e,Vd).update({billing:{method:"klarna",klarna:{token:a}}}),{success:!0}}(e,0,0,o));return c?c.error?n(c.error):a(c):void 0}(e,t||this.params,r)},async authenticate(t){const r=await this.get(t);if(!r)throw new Error("Payment not found");const n=Cf(await ed(e,Vd).payments());if(n.error)throw new Error(n.error);return await async function(e,t,r){const{method:n,gateway:a}=t;if("card"===n){const n=r.card;if(n){if("stripe"===a&&"stripe"===n.gateway)return window.Stripe||await Wd("stripe-js","https://js.stripe.com/v3/"),async function(e,t,r){const{transaction_id:n,card:{token:a}={}}=t,{publishable_key:o}=r.card,i=await Yd(e,Vd).updateIntent({gateway:"stripe",intent:{id:n,payment_method:a}}).catch((e=>({error:e})));if(i.error)return i;const c=window.Stripe(o),s=await c.confirmCardPayment(i.client_secret);return s.error?{error:{message:s.error.message,code:s.error.code}}:{status:s.status}}(e,t,r)}else console.error("Authenticate error: credit card payments are disabled. See Payment settings in the Swell dashboard for details.")}}(e,r,n)},async createIntent(e){const t=await Df("post","/intent",e);if(t.errors){const e=Object.keys(t.errors)[0],r=new Error(t.errors[e].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=e,r}return t},async updateIntent(e){const t=await Df("put","/intent",e);if(t.errors){const e=Object.keys(t.errors)[0],r=new Error(t.errors[e].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=e,r}return t},async authorizeGateway(e){const t=await Df("post","/authorization",e);if(t.errors){const e=Object.keys(t.errors)[0],r=new Error(t.errors[e].message||"Unknown error");throw r.code="vault_error",r.status=402,r.param=e,r}return t}}}const Wd=async(e,t)=>(Bd[e]=Bd[e]||new Promise((r=>{const n=document.createElement("script");n.id=e,n.src=t,n.async=!0,n.type="text/javascript",n.addEventListener("load",(()=>{r(),Bd[e]=null}),{once:!0}),document.head.appendChild(n)})),Bd[e]);async function Hd(e,t,r){const{publishable_key:n}=t.card,a=window.Stripe(n),o=a.elements(r.config),i=e=>{const t=Zt(r,`card[${e}]`)||r.card||r.ideal,n=t.options||{},a=o.create(e,n);a.mount(t.elementId||`#${e}-element`),t.onChange&&a.on("change",t.onChange),t.onReady&&a.on("ready",t.onReady),t.onFocus&&a.on("focus",t.onFocus),t.onBlur&&a.on("blur",t.onBlur),t.onEscape&&a.on("escape",t.onEscape),t.onClick&&a.on("click",t.onClick),"card"!==e&&"cardNumber"!==e&&"idealBank"!==e||(Gd.stripe=a)};Jd.stripe=a,r.ideal?i("idealBank"):r.card.separateElements?(i("cardNumber"),i("cardExpiry"),i("cardCvc")):i("card")}const Xd={};require("isomorphic-fetch");const Kd={store:null,key:null,url:null,useCamelCase:null,previewContent:null},Qd={options:Kd,request:ep,init(e,t,r={}){Kd.key=t,Kd.store=e,Kd.url=r.url?$f(r.url):`https://${e}.swell.store`,Kd.vaultUrl=r.vaultUrl?$f(r.vaultUrl):"https://vault.schema.io",Kd.timeout=r.timeout&&parseInt(r.timeout,10)||2e4,Kd.useCamelCase=r.useCamelCase||!1,Kd.previewContent=r.previewContent||!1,Kd.session=r.session,Kd.locale=r.locale,Kd.currency=r.currency,Kd.api=Qd,jf=Kd},auth(...e){return this.init(...e)},get:(e,t)=>ep("get",e,t),put:(e,t)=>ep("put",e,t),post:(e,t)=>ep("post",e,t),delete:(e,t)=>ep("delete",e,t),cache:Zf,card:Lf,cart:Qf(ep,Kd),account:function(e){return{state:null,async requestStateChange(t,r,n,a){const o=await e(t,r,n,a);return o&&o.errors?o:this.state=o},get(e){return this.requestStateChange("get","/account",e)},create(e){return this.requestStateChange("post","/account",e)},update(e){return this.requestStateChange("put","/account",e)},login(e,t){return t&&t.password_token?this.requestStateChange("post","/account/login",{email:e,password_token:t.password_token}):this.requestStateChange("post","/account/login",{email:e,password:t})},logout(){return this.state=null,e("post","/account/logout")},recover:t=>e("post","/account/recover",t),listAddresses:t=>e("get","/account/addresses",t),createAddress:t=>e("post","/account/addresses",t),updateAddress:(t,r)=>e("put",`/account/addresses/${t}`,r),deleteAddress:t=>e("delete",`/account/addresses/${t}`),listCards:t=>e("get","/account/cards",t),createCard:t=>e("post","/account/cards",t),updateCard:(t,r)=>e("put",`/account/cards/${t}`,r),deleteCard:t=>e("delete",`/account/cards/${t}`),listOrders:t=>e("get","/account/orders",t),getOrder:t=>e("get",`/account/orders/${t}`),getAddresses:t=>e("get","/account/addresses",t),getCards:t=>e("get","/account/cards",t),getOrders:t=>e("get","/account/orders",t)}}(ep),products:function(e,t){Gf=t;const{get:r,list:n}=Rf(e,"/products",["list","get"]);return{get:(e,...t)=>Zf.getFetch("products",e,(()=>r(e,...t))),list:n,variation:Vf,categories:Hf,attributes:Xf,priceRange:Kf,filters:Wf,filterableAttributeFilters:(t,r)=>async function(e,t,r){const{results:n}=await Bf(e).list({filterable:!0});return Wf(t,{...r,filterableAttributes:n})}(e,t,r)}}(ep,Kd),categories:function(e){const{get:t,list:r}=Rf(e,"/categories",["list","get"]);return{get:(e,...r)=>Zf.getFetch("categories",e,(()=>t(e,...r))),list:r}}(ep),attributes:Bf(ep),subscriptions:function(e){const{get:t,list:r}=Rf(e,"/subscriptions",["list","get"]);return{get:(e,...r)=>Zf.getFetch("subscriptions",e,(()=>t(e,...r))),list:r,getCleanData:e=>(e&&e.options&&(e.options=Jf(e.options)),e.items&&e.items.map&&(e.items=e.items.map((e=>(e.options&&(e.options=Jf(e.options)),e)))),e),create(t){return e("post","/subscriptions",this.getCleanData(t))},update(t,r){return e("put",`/subscriptions/${t}`,this.getCleanData(r))},addItem(t,r){return e("post",`/subscriptions/${t}/items`,this.getCleanData(r))},setItems(t,r){return r&&r.map&&(r=r.map(this.getCleanData)),e("put",`/subscriptions/${t}/items`,r)},updateItem(t,r,n){return e("put",`/subscriptions/${t}/items/${r}`,this.getCleanData(n))},removeItem:(t,r)=>e("delete",`/subscriptions/${t}/items/${r}`)}}(ep),content:function(e,t){return{get:(r,n,a)=>Zf.getFetch(`content_${r}`,n,(()=>e("get",`/content/${r}`,n,{$preview:t.previewContent,...a||{}}))),list:(t,r)=>e("get",`/content/${t}`,void 0,r)}}(ep,Kd),settings:ed(ep,Kd),payment:Yd(ep,Kd),locale:function(e,t){return{code:null,state:null,list:()=>t.api.settings.get("store.locales",[]),async select(r){return this.set(r),Nf("swell-locale",r),t.api.settings.locale=r,await e("put","/session",{locale:r})},selected(){if(this.code)return this.code;const e=t.api.settings.getStoreLocale(),r=Tf("swell-locale");return t.api.settings.locale=r||e,r||e},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(e){return this.code=e,this.state=Ko(this.list(),{code:e})||{},this.state}}}(ep,Kd),currency:function(e,t){return{code:null,state:null,locale:null,list:()=>t.api.settings.get("store.currencies",[]),async select(t){return this.set(t),e("put","/session",{currency:t})},selected(){return this.code||this.set(Tf("swell-currency")||t.api.settings.get("store.currency")),this.code},get(){return this.code||(this.code=this.selected()),this.state||(this.state=this.set(this.code)),this.state},set(e="USD"){return this.code=e,this.state=Ko(this.list(),{code:e})||{code:e},this.locale=String(t.api.settings.get("store.locale","object"==typeof navigator?navigator.language:"en-US")),Nf("swell-currency",e),this.state},format(e,t={}){let r=this.get();if(t.code&&t.code!==r.code){const e=this.list();r=Ko(e,{code:t.code})||{code:t.code}}const{code:n="USD",type:a,decimals:o,rate:i}=r,c=t.code||n,s=t.rate||i,u=t.locale||this.locale,l="number"==typeof t.decimals?t.decimals:o,{convert:f=!0}=t;let d=e;f&&("display"===a||t.rate)&&"number"==typeof d&&"number"==typeof s&&(d=this.applyRounding(e*s,r));const p=this.formatter({code:c,locale:u,decimals:l});try{if("number"==typeof d)return p.format(d);{const e=Zt(p.formatToParts(0),"0.value","$");return e!==c?e:""}}catch(e){console.warn(e)}return String(e)},formatter({code:e,locale:t,decimals:r}){const n=[e,t=String(t||"").replace("_","-"),r].join("|");if(Xd[n])return Xd[n];const a=[];t&&a.push(t),a.push("en-US");const o="number"==typeof r?r:void 0,i={style:"currency",currency:e,currencyDisplay:"symbol",minimumFractionDigits:o,maximumFractionDigits:o};try{try{Xd[n]=new Intl.NumberFormat(a,i)}catch(e){e.message.indexOf("Invalid language tag")>=0&&(Xd[n]=new Intl.NumberFormat("en-US",i))}}catch(e){console.warn(e)}return Xd[n]},applyRounding(e,t){if(!t||!t.round)return e;const r=t.decimals,n="fraction"===t.round_interval&&t.round_fraction||0;let a=~~e,o=this.round(e,r);if(o===n)return a+o;const i=this.round(o-n,1);if("down"===("nearest"===t.round?i>0?i>=.5?"up":"down":i<=-.5?"down":"up":t.round))a=a+n-(o>n?0:1);else a=a+n+(o>n?1:0);return this.round(a,r)},round:oi}}(ep,Kd)};async function ep(e,t,r,n,a){const o={...Kd,...a},i=o.session||Tf("swell-session"),c=o.locale||Tf("swell-locale"),s=o.currency||Tf("swell-currency"),u=`${o.url}${o.base||""}/api`,l=String(e).toLowerCase();let f=t,d=r;var p;let h;if(void 0===n&&"string"!=typeof r||(f=[$f(t),Ef(r)].join("/"),d=n),f=o.fullUrl||`${u}/${p=f,Ef($f(p))}`,d=o.useCamelCase?Cf(d):d,"get"===l){let e;[f,e]=f.split("?");const t=[e,If(d)].join("&").replace(/^&/,"");f=`${f}${t?`?${t}`:""}`}else h=JSON.stringify(d);const y={Accept:"application/json","Content-Type":"application/json",Authorization:`Basic ${g=String(o.key),"undefined"!=typeof btoa?btoa(g):Buffer.from(g).toString("base64")}`};var g;i&&(y["X-Session"]=i),c&&(y["X-Locale"]=c),s&&(y["X-Currency"]=s);const v=await fetch(f,{method:l,headers:y,body:h,credentials:"include",mode:"cors"}),b=v.headers.get("X-Session");"string"==typeof b&&i!==b&&Nf("swell-session",b);const m=await v.json();if(m&&m.error){const e=new Error(m.error.message);throw e.status=v.status,e.code=m.error.code,e.param=m.error.param,e}if(!v.ok){const e=new Error("A connection error occurred while making the request");throw e.code="connection_error",e}return Kd.useCamelCase?Of(m):m}return"undefined"!=typeof window&&(window.swell={version:"@VERSION@"}),Qd}));
//# sourceMappingURL=swell.umd.min.js.map
